(this["webpackJsonpidle-anno-redux"]=this["webpackJsonpidle-anno-redux"]||[]).push([[0],{18:function(e,t,r){e.exports=r(38)},30:function(e,t,r){},31:function(e,t,r){},32:function(e,t,r){},33:function(e,t,r){},34:function(e,t,r){},35:function(e,t,r){},36:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(7),c=r.n(a),i=r(1),s=r(5),u=r(15),l={INIT:"INIT",TICK:"TICK",LOAD_GAME:"LOAD_GAME"};var d=r(3),p=r(2),b={BUILD_WAREHOUSE:"BUILD_WAREHOUSE",UPDGRADE_WAREHOUSE:"UPGRADE_WAREHOUSE"};var O={CONSTRUCT_BUILDING:"CONSTRUCT_BUILDING",DESTROY_BUILDING:"DESTROY_BUILDING"};var f={AMENITY:"AMENITY",PRODUCER:"PRODUCER",HOUSE:"HOUSE",WAREHOUSE:"WAREHOUSE"},g={marketplace:{name:"Marketplace",description:"Provides a place for villagers to meet",category:f.AMENITY,produces:{community:2.5},upkeep:10},chapel:{name:"Chapel",description:"A basic building for villagers to worship",category:f.AMENITY,produces:{faith:2},upkeep:15},fishinghut:{name:"Fisherman's Hut",description:"Gathers fish",category:f.PRODUCER,consumes:{},produces:{fish:1},produceTime:30,upkeep:15},lumberjackhut:{name:"Lumberjack's Hut",description:"Gathers wood",category:f.PRODUCER,consumes:{},produces:{wood:1},produceTime:40,upkeep:5},orchard:{name:"Orchard",description:"Grows apples to be turned into cider",category:f.PRODUCER,consumes:{},produces:{apple:1},produceTime:100,upkeep:0},ciderfarm:{name:"Cider Farm",description:"Processes apples into cider",category:f.PRODUCER,consumes:{apple:1},produces:{cider:1},produceTime:40,upkeep:15},hempfarm:{name:"Hemp Plantation",description:"Grows hemp",category:f.PRODUCER,consumes:{},produces:{hemp:1},produceTime:60,upkeep:20},weavers:{name:"Weaver's Hut",description:"Uses hemp to create clothing",category:f.PRODUCER,consumes:{hemp:1},produces:{linen:1},produceTime:30,upkeep:25},quarry:{name:"Stone Quarry",description:"Gathers raw stone",category:f.PRODUCER,consumes:{},produces:{stone:1},produceTime:30,upkeep:20},stonemason:{name:"Stonemason",description:"Turns raw stone into useable bricks",category:f.PRODUCER,consumes:{stone:1},produces:{stonebrick:1},produceTime:30,upkeep:20},peasanthouse:{name:"Peasant Shack",description:"Basic home for villagers. Houses 8",category:f.HOUSE,upkeep:0,populationCategory:"peasant",populationCap:8,ascendsTo:"citizenhouse"},citizenhouse:{name:"Citizen House",description:"Home for citizens",category:f.HOUSE,upkeep:0,populationCategory:"citizen",populationCap:15,ascendsTo:"patricianhouse",cost:{wood:1,tool:1}},smallwarehouse:{name:"Small Warehouse",description:"Basic warehouse for your island",category:f.WAREHOUSE,upkeep:10,couriers:3,capacity:40,upgradesTo:"mediumwarehouse",upgradeCost:{gold:150,wood:2,tool:3,stonebrick:4}},mediumwarehouse:{name:"Medium Warehouse",description:"Expanded warehouse",category:f.WAREHOUSE,upkeep:15,couriers:1,capacity:10},smallstockpile:{name:"Small Stockpile",description:"Small depot. Provides 1 courier",category:f.WAREHOUSE,upkeep:10,couriers:1,capacity:0}},m={BUILD_HOUSE:"BUILD_HOUSE",ASCEND_HOUSE:"ASCEND_HOUSE"};var v={BUY_GOODS:"BUY_GOODS",SELL_GOODS:"SELL_GOODS",DISMISS_TRADER:"DISMISS_TRADER"};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j={reserved:0,pending:0};function w(e,t){for(var r=Object.assign({},e),n=0,o=Object.entries(t);n<o.length;n++){var a=o[n],c=Object(p.a)(a,2),i=c[0],s=c[1],u=Object.assign({},r[i]);u.owned-=s,r[i]=u}return r}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=r(8),D=r.n(P);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k={AWAITING_RESOURCES:"AWAITING_RESOURCES",WORKING:"WORKING",OUTBOX_FULL:"OUTBOX_FULL",DISABLED:"DISABLED"},C={status:k.AWAITING_RESOURCES,progress:0,efficiency:1,efficiencyTimer:0,efficiencySupplied:!1,inbox:{},outbox:{}},R=.01,U=2,_=1,N=100,A=5;function L(e){e.inbox={};for(var t=0,r=Object.keys(e.consumes);t<r.length;t++){var n=r[t];e.inbox[n]=0}e.outbox={};for(var o=0,a=Object.keys(e.produces);o<a.length;o++){var c=a[o];e.outbox[c]=0}}function x(e,t){var r=Object.assign({},e);if(!function(e){for(var t=0,r=Object.entries(e.consumes);t<r.length;t++){var n=r[t],o=Object(p.a)(n,2),a=o[0],c=o[1];if(e.inbox[a]<c)return!1}return!0}(r))return r.status=k.AWAITING_RESOURCES,r.efficiencySupplied&&(r.efficiencySupplied=!1,r.efficiencyTimer=0),r=G(r,t);if(!function(e){for(var t=0,r=Object.entries(e.produces);t<r.length;t++){var n=r[t],o=Object(p.a)(n,2),a=o[0],c=o[1];if(e.outbox[a]+c>A)return!1}return!0}(r))return r.status=k.OUTBOX_FULL,r.efficiencySupplied&&(r.efficiencySupplied=!1,r.efficiencyTimer=0),r=G(r,t);if(r.status=k.WORKING,r.efficiencySupplied||(r.efficiencySupplied=!0,r.efficiencyTimer=0),(r=G(r,t)).progress+=t*r.efficiency*R,r.progress>r.produceTime){r.progress-=r.produceTime;for(var n=Object.assign({},r.inbox),o=Object.assign({},r.outbox),a=0,c=Object.entries(r.consumes);a<c.length;a++){var i=c[a],s=Object(p.a)(i,2),u=s[0],l=s[1];n[u]-=l}for(var d=0,b=Object.entries(r.produces);d<b.length;d++){var O=b[d],f=Object(p.a)(O,2),g=f[0],m=f[1];o[g]+=m}r.inbox=n,r.outbox=o}return r}function G(e,t){return e.efficiencyTimer+=t,e.efficiencyTimer>U&&(e.efficiencyTimer-=U,e.efficiencySupplied?e.efficiency=Math.min(N,e.efficiency+1):e.efficiency=Math.max(_,e.efficiency-1)),e}var H=r(9);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F="IDLE",W="PICKING_UP",K="EN_ROUTE",z="DROPPING_OFF",Y={status:F,progress:0,timeThreshold:0,jobDescription:{},payload:{},markedForDeath:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload,n=e.couriers;if(!n)return e;switch(t.type){case l.INIT:var o=g[e.warehouse.type],a=n.couriers.slice(0);J(a,o.couriers);var c=Object.assign({},n);return c.couriers=a,Object.assign({},e,{couriers:c});case b.UPDGRADE_WAREHOUSE:var i=g[r.toUpgrade].upgradesTo;r.toConstruct={id:i};case b.BUILD_WAREHOUSE:var s=g[r.toConstruct.id],u=s.couriers,d=Object.assign({},e),p=Object.assign({},d.couriers);d.couriers=p;var m=p.couriers.slice(0);return J(m,u),p.couriers=m,d;case O.DESTROY_BUILDING:var v=r.toDestroy;if(v.category!==f.WAREHOUSE)return e;for(var h=Object(H.a)(e.couriers.couriers),y=M({},e.couriers,{couriers:h}),j=M({},e,{couriers:y}),w=0;w<h.length;w++){var E=h[w];if(E.status===F&&!E.markmarkedForDeath)return h.splice(w,1),j}for(var S=h.length-1;S>=0;S--){var P=h[S];if(!P.markmarkedForDeath)return P.markedForDeath=!0,j}return j;case l.TICK:var D=Object.assign({},e),I=Object.assign({},D.couriers),T=Object.assign({},D.warehouse),k=T.totalCapacity,C=Object.assign({},T.resources);T.resources=C;var R=Object.assign({},D.buildings),U=Object.assign({},R.owned);R.owned=U,D.warehouse=T,D.buildings=R,D.couriers=I;var _=V(n,T,U),N=n.jobQueue.slice(0).concat(_.jobList),L=Object.assign({},n.jobQueueMap,_.jobRef),x=I.couriers.map((function(e){if(e.status===F){var t=Object.assign({},e),r=$(N,U),n=N[r];if(N=N.slice(r+1),!n)return e;var o=n.from,a=n.to,c=n.carrying,i=null,s=null,u=0;if(i="warehouse"!==o?R.owned[o]:T,s="warehouse"!==a?R.owned[a]:T,"warehouse"===o){var l=A-s.inbox[c],d=Math.floor(C[c].owned-C[c].reserved);u=Math.min(l,d);var p=Object.assign({},C[c]);p.reserved+=u,C[c]=p}else{var b=i.outbox[c],O=Math.floor(k-C[c].owned-C[c].pending);u=Math.min(b,O);var f=Object.assign({},C[c]);f.pending+=u,C[c]=f}return n.amount=u,t.status=W,t.timeThreshold=8,t.jobDescription=n,t}return e}));I.jobQueue=N,I.jobQueueMap=L;x.map((function(e){if(e.status===F)return e;if(e.progress+=r.tickIntervalSeconds,e.progress>=e.timeThreshold){e.progress-=e.timeThreshold;var t=e.jobDescription,n=t.from,o=t.to,a=t.carrying,c=t.amount,i=null,s=null;switch("warehouse"!==n?U.hasOwnProperty(n)&&(i=Object.assign({},U[n]),U[n]=i):i=T,"warehouse"!==o?U.hasOwnProperty(o)&&(s=Object.assign({},U[o]),U[o]=s):s=T,e.status){case W:var u=Object.assign({},e.payload);if(e.payload=u,"warehouse"===n){var l=Object.assign({},C[a]);C[a]=l,l.owned-=c,l.reserved-=c,u[a]=c}else{if(!i){e.payload={},e.status=F,e.jobDescription={},e.progress=0,e.timeThreshold=0,delete L[e.jobDescription.id];break}var d=Object.assign({},i.outbox);i.outbox=d,d[a]-=c,u[a]=c,delete L[e.jobDescription.id]}e.status=K,e.timeThreshold=20;break;case K:e.status=z,e.timeThreshold=8;break;case z:var p=Object.assign({},e.payload);if("warehouse"===o){var b=Object.assign({},C[a]);C[a]=b,b.owned+=p[a],b.pending-=c}else{if(s){var O=Object.assign({},s.inbox);s.inbox=O,O[a]+=c}else{var f=Object.assign({},C[a]);C[a]=f,f.owned+=p[a]}delete L[e.jobDescription.id]}e.payload={},e.status=F,e.jobDescription={},e.progress=0,e.timeThreshold=0}}return e}));var G=x.filter((function(e){return e.status!==F||!e.markedForDeath}));return I.couriers=G,D.couriers=I,D;default:return e}};function J(e,t){for(var r=0;r<t;r++){var n=Object.assign({},Y,{id:D()()});e.push(n)}}var Q="_SUPPLY",X="_PICKUP";function V(e,t,r){for(var n=e.jobQueueMap,o=t.totalCapacity,a=t.resources,c={jobList:[],jobRef:{}},i=0,s=Object.values(r);i<s.length;i++){var u=s[i];if(u.category===f.PRODUCER)for(var l=0,d=Object.entries(u.inbox);l<d.length;l++){var b=d[l],O=Object(p.a)(b,2),g=O[0],m=O[1],v=u.id+"_"+g+"_"+Q;if(m<A&&!n[v]){var h=a[g];if(Math.floor(h.owned-h.reserved)>0){var y={id:v,from:"warehouse",to:u.id,carrying:g};c.jobList.push(y),c.jobRef[v]=y}}}}var j=Object.values(r).reduce((function(e,t){if(t.category!==f.PRODUCER)return e;for(var r=0,c=Object.entries(t.outbox);r<c.length;r++){var i=c[r],s=Object(p.a)(i,2),u=s[0],l=s[1],d=t.id+X;if(l>0&&!n[d]){var b=a[u];if(Math.floor(o-b.owned-b.pending)>0){var O={id:d,from:t.id,to:"warehouse",carrying:u};e.jobList.push(O),e.jobRef[d]=O}}}return e}),{jobList:[],jobRef:{}});return{jobList:c.jobList.concat(j.jobList),jobRef:Object.assign({},c.jobRef,j.jobRef)}}function $(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=n.from,a=n.to;if(("warehouse"===o||t.hasOwnProperty(o))&&("warehouse"===a||t.hasOwnProperty(a)))return r}}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te={popProgress:0,currentPop:1},re={peasanthouse:.8,citizenhouse:.6},ne={peasanthouse:["peasanthouse","citizenhouse"],citizenhouse:["citizenhouse"],patricianhouse:[]};function oe(e,t,r){var n=ne[r].reduce((function(t,r){return t+e[r].owned}),0);t.totalAscensionRights=Math.floor(re[r]*n);var o=g[r].ascendsTo,a=ne[o].reduce((function(t,r){return t+e[r].owned}),0);t.remainingAscensionRights=t.totalAscensionRights-a}function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie={owned:0,maxPopulation:0,happiness:0,canAscend:!1,consumeInfo:""},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:for(var n=r.tickIntervalSeconds,o=Object.assign({},e),a=e.buildings,c={},i=0,s=Object.values(a.owned);i<s.length;i++){var u=s[i];if(u.category===f.AMENITY)for(var d=0,b=Object.entries(u.produces);d<b.length;d++){var O=b[d],g=Object(p.a)(O,2),m=g[0],v=g[1];c[m]||(c[m]=0),c[m]+=v*n*(1/60)}}return o.amenities=c,o;default:return e}},ue={peasant:{name:"Peasant",taxRate:.8,consumes:{community:{quantity:1,weight:25},fish:{quantity:1,weight:25},cider:{quantity:.44,weight:25},faith:{quantity:1,weight:25}}},citizen:{name:"Citizen",taxRate:.95,consumes:{fish:{quantity:.4,weight:8},spice:{quantity:.4,weight:12},cider:{quantity:.44,weight:20},linen:{quantity:.42,weight:20},community:{quantity:1,weight:20},faith:{quantity:1,weight:20}}}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:var n=r.tickIntervalSeconds,o=Object.assign({},e),a=Object.assign({},o.warehouse),c=Object.assign({},a.resources);a.resources=c;var i=o.amenities,s=Object.assign({},o.population);o.warehouse=a,o.population=s;for(var u=0,d=Object.entries(e.population);u<d.length;u++){var b=d[u],O=Object(p.a)(b,2),f=O[0],g=O[1],m=Object.assign({},g);m.consumeInfo=null;var v=0;if(0!==g.owned)for(var h=0,y=Object.entries(ue[f].consumes);h<y.length;h++){var j=y[h],w=Object(p.a)(j,2),E=w[0],S=w[1],P=S.quantity*m.owned*n*(1/60)*.01,D=1;if(i[E])i[E]<P&&(D=i[E]/P,m.consumeInfo||(m.consumeInfo="Need "+E)),i[E]-=P,i[E]<0&&(i[E]=0);else if(c[E]){var I=Object.assign({},c[E]);c[E]=I,I.owned<P&&(D=I.owned/P,m.consumeInfo||(m.consumeInfo="Need "+E)),I.owned-=P,I.owned<0&&(I.owned=0)}else D=0,m.consumeInfo||(m.consumeInfo="Need "+E);v+=S.weight*D}var T=(v-m.happiness)/100;Math.abs(T)<.001&&(T=.001),m.happiness+=T,s[f]=m}return o;default:return e}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:var n=r.tickIntervalSeconds,o=Object.assign({},e),a=Object.assign({},o.housing),c=Object.assign({},o.population);o.housing=a,o.population=c;var i={},s=a.abodes.map((function(e){var t=Object.assign({},e),r=c[t.populationCategory].happiness,o=0;return r>=40&&t.currentPop<t.populationCap&&(o=1),r<=20&&t.currentPop>0&&(o=-1),t.popProgress+=n*o,(t.popProgress>10||t.popProgress<-10)&&(t.popProgress-=10*o,t.currentPop+=o),t.currentPop<1&&(t.currentPop=1),i[t.populationCategory]||(i[t.populationCategory]=0),i[t.populationCategory]+=t.currentPop,t}));a.abodes=s;for(var u=0,d=Object.entries(i);u<d.length;u++){var b=d[u],O=Object(p.a)(b,2),f=O[0],g=O[1],m=Object.assign({},c[f]);m.owned=g,c[f]=m}return o;default:return e}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:var n=r.tickIntervalSeconds,o=Object.assign({},e),a=Object.assign({},o.warehouse),c=Object.assign({},a.resources),i=Object.assign({},c.gold);o.warehouse=a,a.resources=c,c.gold=i;var s={maintenanceCost:0,taxRevenue:0},u=g[a.type].upkeep*n*(1/60),d=Object.values(e.construction).reduce((function(e,t){return e+g[t.id].upkeep*t.owned*n*(1/60)}),u),p=Object.values(e.population).reduce((function(e,t){var r=.01*t.happiness;return r<.01&&(r=.01),e+ue[t.id].taxRate*t.owned*n*(1/60)*r}),0);return s.maintenanceCost=d,s.taxRevenue=p,o.financeInfo=s,i.owned=i.owned+p-d,o;default:return e}},be=[["peasant",60],["peasant",90],["citizen",1],["citizen",355],["patrician",510],["patrician",1190],["nobleman",950],["nobleman",2200],["nobleman",3500],["nobleman",7500]],Oe=[{title:"Small Settlement",buildings:["marketplace","fishinghut","lumberjackhut"],population:"peasant",resources:["gold","wood","tool","fish"]},{buildings:["orchard","ciderfarm"],resources:["apple","cider"]},{title:"Settlement",buildings:["chapel"]},{population:"citizen",resources:["hemp","linen","stone","stonebrick","spice"],buildings:["hempfarm","weavers","quarry","stonemason"],housing:["citizenhouse"]}];function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.TICK:var r=Object(p.a)(be[e.island.level-1],2),n=r[0],o=r[1],a=e.population[n].owned;if(a>=o){var c=Object.assign({},e),i=Object.assign({},c.island);c.island=i,i.level++;var s=Oe[i.level-1];if(s.title&&(i.title=s.title),s.buildings){var u=Object.assign({},c.construction);c.construction=u,s.buildings.forEach((function(e){var t=Object.assign({},u[e]);t.unlocked=!0,u[e]=t}))}if(s.resources){var d=Object.assign({},c.warehouse),b=Object.assign({},d.resources);c.warehouse=d,d.resources=b,s.resources.forEach((function(e){var t=Object.assign({},b[e]);b[e]=t,t.unlocked=!0}))}if(s.population){var O=Object.assign({},c.population);c.population=O;var f=Object.assign({},O[s.population]);f.unlocked=!0,O[s.population]=f}if(s.housing){var g=ge({},c.housing.types),m=ge({},c.housing,{types:g});c.housing=m,s.housing.forEach((function(e){var t=ge({},g[e],{unlocked:!0});g[e]=t}))}return c}return e;default:return e}},ve={SET_TIME_FACTOR:"SET_TIME_FACTOR"};function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case ve.SET_TIME_FACTOR:return ye({},e,{cheat:{timeFactor:r.timeFactor}});default:return e}},we={lord:{name:"Lord Farquaad",rates:{wood:{buy:.5,sell:1.2},tool:{buy:.5,sell:1.2},stonebrick:{buy:.5,sell:1.2},spice:{buy:1,sell:0}},baseCapacity:30},prince:{name:"Prince Ali",rates:{wood:{buy:1,sell:1},tool:{buy:1,sell:1.2},spice:{buy:0,sell:1.25}},baseCapacity:40}},Ee={gold:{name:"Gold",baseTradePrice:1},tool:{name:"Tool",baseTradePrice:15},fish:{name:"Fish",baseTradePrice:3},wood:{name:"Wood",baseTradePrice:1},apple:{name:"Apple",baseTradePrice:.2},cider:{name:"Cider",baseTradePrice:3},hemp:{name:"Hemp",baseTradePrice:4},linen:{name:"Clothing",baseTradePrice:27},stone:{name:"Stone",baseTradePrice:6},stonebrick:{name:"Stone Brick",baseTradePrice:8},spice:{name:"Spice",baseTradePrice:6}};function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var De=360,Ie={traderId:0,timer:0,timeToLeave:De,wares:{},newGame:!0,dismissCost:100};function Te(e){var t=Object.keys(we),r=t[Math.floor(Math.random()*t.length)];e.newGame&&(e.newGame=!1,r="lord");for(var n=we[r],o={},a=n.baseCapacity,c=Pe({},e,{traderId:r,wares:o,maxCapacity:a,timeToLeave:De}),i=0,s=Object.entries(n.rates);i<s.length;i++){var u=s[i],l=Object(p.a)(u,2),d=l[0],b=l[1],O=Ee[d].baseTradePrice,f=b.buy*O,g=b.sell*O;o[d]={buyPrice:f,sellPrice:g,held:0},g>0&&(o[d].held=Math.floor(.75*a))}return c}var ke=Object(s.c)({cheat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},island:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return e},warehouse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.INIT:var n=Object.assign({},e),o=Object.entries(n.resources).reduce((function(e,t){var r=Object(p.a)(t,2),n=r[0],o=r[1],a=Object.assign({},o,j);return e[n]=a,e}),{});return n.resources=o,n;case m.BUILD_HOUSE:case m.ASCEND_HOUSE:case O.CONSTRUCT_BUILDING:var a=Object.assign({},e),c=r.toConstruct.cost,i=w(a.resources,c);return a.resources=i,a;case b.BUILD_WAREHOUSE:var s=Object.assign({},e),u=r.toConstruct.cost,f=w(s.resources,u);s.resources=f;var h=g[r.toConstruct.id];return s.totalCapacity+=h.capacity,s;case b.UPDGRADE_WAREHOUSE:var E=Object.assign({},e),S=g[e.type],P=g[S.upgradesTo];if(!P)return e;var D=S.upgradeCost,I=w(E.resources,D);return E.resources=I,E.totalCapacity+=P.capacity,E.type=g[e.type].upgradesTo,E;case v.DISMISS_TRADER:var T=r.cost,k=w(e.resources,T);return y({},e,{resources:k});case v.BUY_GOODS:var C=r.product,R=r.amount,U=r.atPrice,_=y({},e.resources.gold);_.owned-=R*U;var N=y({},e.resources[C]);N.owned+=R;var A=y({},e.resources,Object(d.a)({gold:_},C,N));return y({},e,{resources:A});case v.SELL_GOODS:var L=r.product,x=r.amount,G=r.atPrice,H=y({},e.resources.gold);H.owned+=x*G;var B=y({},e.resources[L]);B.owned-=x;var M=y({},e.resources,Object(d.a)({gold:H},L,B));return y({},e,{resources:M});default:return e}},construction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case b.BUILD_WAREHOUSE:case m.BUILD_HOUSE:case O.CONSTRUCT_BUILDING:var n=r.toConstruct.id,o=e[n],a=Object.assign({},o,{owned:o.owned+1});return Object.assign({},e,Object(d.a)({},n,a));case O.DESTROY_BUILDING:var c=r.toDestroy.buildingId,i=S({},e[c]);return i.owned--,S({},e,Object(d.a)({},c,i));default:return e}},buildings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:if(!e.owned)return e;var n=Object.assign({},e),o=Object.assign({},n.owned);n.owned=o;var a=r.tickIntervalSeconds;return Object.values(e.owned).forEach((function(e){var t=null;t=e.category===f.PRODUCER?x(e,a):e,o[t.id]=t})),n;case b.BUILD_WAREHOUSE:case O.CONSTRUCT_BUILDING:var c=g[r.toConstruct.id],i=Object.assign({},c,{id:D()(),buildingId:r.toConstruct.id});c.category===f.PRODUCER&&L(i=Object.assign(i,C));var s=Object.assign({},e.owned);return s[i.id]=i,Object.assign({},e,{owned:s});case O.DESTROY_BUILDING:var u=r.toDestroy,d=T({},e.owned);return delete d[u.id],T({},e,{owned:d});default:return e}},couriers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},housing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case m.BUILD_HOUSE:var n=Object.assign({},e),o=Object.assign({},n.types),a=n.abodes.slice(0);n.types=o,n.abodes=a;var c=r.toConstruct.id,i=Object.assign({},o[c]);o[c]=i;var s=Object.assign({},g[c],te,{houseId:c});return i.owned+=1,a.push(s),oe(o,i,c),n;case m.ASCEND_HOUSE:var u,l=r.fromHouse,p=g[l].ascendsTo,b=ee({},e.types[l]),O=ee({},e.types[p]),f=ee({},e.types,(u={},Object(d.a)(u,l,b),Object(d.a)(u,p,O),u)),v=Object(H.a)(e.abodes),h=ee({},e,{types:f,abodes:v}),y=g[p],j=v.findIndex((function(e){return e.houseId===l}));return v.splice(j,1),v.push(ee({},y,{},te,{houseId:p})),b.owned-=1,O.owned+=1,oe(f,b,l),oe(f,O,p),h;default:return e}},population:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.INIT:for(var n=Object.assign({},e),o=0,a=Object.entries(n);o<a.length;o++){var c=a[o],i=Object(p.a)(c,2),s=i[0],u=i[1],b=Object.assign({},u,ie);n[s]=b}return n;case m.BUILD_HOUSE:var O=g[r.toConstruct.id],f=Object.assign({},e),v=Object.assign({},f[O.populationCategory]);return f[v.id]=v,v.maxPopulation+=O.populationCap,f;case l.TICK:for(var h=Object.assign({},e),y=0,j=Object.entries(h);y<j.length;y++){var w=j[y],E=Object(p.a)(w,2),S=E[0],P=E[1];P.happiness>97&&P.owned===P.maxPopulation?h[S]=ce({},P,{canAscend:!0}):h[S]=ce({},P,{canAscend:!1})}return h;case m.ASCEND_HOUSE:var D,I=g[r.fromHouse],T=g[I.ascendsTo],k=ce({},e[I.populationCategory]),C=ce({},e[T.populationCategory]);return k.owned-=I.populationCap,C.owned+=I.populationCap,k.maxPopulation-=I.populationCap,C.maxPopulation+=T.populationCap,ce({},e,(D={},Object(d.a)(D,I.populationCategory,k),Object(d.a)(D,T.populationCategory,C),D));default:return e}},trader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case v.BUY_GOODS:var n=r.product,o=r.amount,a=Pe({},e.wares),c=Pe({},e,{wares:a});return a[n].held-=o,c;case v.SELL_GOODS:var i=r.product,s=r.amount,u=Pe({},e.wares),d=Pe({},e,{wares:u});return u[i].held+=s,d;case l.TICK:var p=r.tickIntervalSeconds,b=Pe({},e);return b.timer+=p,b.timer>b.timeToLeave?(b.timer-=b.timeToLeave,Te(b)):b;case v.DISMISS_TRADER:var O=Pe({},e);return O.traderId=0,O.wares={},O.time=0,O.timeToLeave=180,O;default:return e}}});var Ce=function(e,t){if(t.type===l.LOAD_GAME)return t.payload.saveState;if(t.type===l.TICK){var r=e.cheat.timeFactor;r||(r=1),t.payload.tickIntervalSeconds*=r}var n=je(e,t),o=ke(n,t),a=q(o,t);if(t.type===l.TICK){var c=se(a,t),i=le(c,t),s=de(i,t),u=pe(s,t);return me(u,t)}return a},Re={island:{level:1,title:"Small Settlement",name:"New Island"},construction:{peasanthouse:{id:"peasanthouse",owned:0,cost:{wood:2},unlocked:!0},marketplace:{id:"marketplace",owned:0,cost:{gold:400,wood:5,tool:3},unlocked:!0},fishinghut:{id:"fishinghut",owned:0,cost:{gold:100,wood:3,tool:2},unlocked:!0},lumberjackhut:{id:"lumberjackhut",owned:0,cost:{gold:50,tool:2},unlocked:!0},smallstockpile:{id:"smallstockpile",owned:0,cost:{gold:200,wood:2,tool:3},unlocked:!0},orchard:{id:"orchard",owned:0,cost:{gold:25},unlocked:!1},ciderfarm:{id:"ciderfarm",owned:0,cost:{gold:100,wood:5,tool:1},unlocked:!1},chapel:{id:"chapel",owned:0,cost:{gold:1500,wood:12,tool:5},unlocked:!1},hempfarm:{id:"hempfarm",owned:0,cost:{gold:400,wood:5,tool:2},unlocked:!1},weavers:{id:"weavers",owned:0,cost:{gold:400,wood:5,tool:3}},quarry:{id:"quarry",owned:0,cost:{gold:400,wood:2,tool:2}},stonemason:{id:"stonemason",owned:0,cost:{gold:400,wood:2,tool:2}}},buildings:{owned:{}},warehouse:{type:"smallwarehouse",totalCapacity:40,resources:{gold:{id:"gold",owned:5e3,unlocked:!0},tool:{id:"tool",owned:40,unlocked:!0},fish:{id:"fish",owned:2,unlocked:!0},wood:{id:"wood",owned:40,unlocked:!0},apple:{id:"apple",owned:0,unlocked:!1},cider:{id:"cider",owned:0,unlocked:!1},hemp:{id:"hemp",owned:0,unlocked:!1},spice:{id:"spice",owned:0,unlocked:!1},linen:{id:"linen",owned:0,unlocked:!1},stone:{id:"stone",owned:0,unlocked:!1},stonebrick:{id:"stonebrick",owned:0,unlocked:!1}}},couriers:{couriers:[],jobQueue:[],jobQueueMap:{}},housing:{types:{peasanthouse:{owned:0,totalAscensionRights:0,remainingAscensionRights:0,unlocked:!0},citizenhouse:{owned:0,totalAscensionRights:0,remainingAscensionRights:0,unlocked:!1},patricianhouse:{owned:0,totalAscensionRights:0,remainingAscensionRights:0,unlocked:!1},noblehouse:{owned:0,totalAscensionRights:0,remainingAscensionRights:0,unlocked:!1}},abodes:[]},population:{peasant:{id:"peasant",unlocked:!0},citizen:{id:"citizen",unlocked:!1}}};r(30);var Ue=r(16),_e=r(17),Ne=function(){function e(t,r){Object(Ue.a)(this,e),this.targetFunction=t,this.targetInterval=r,this.running=!1}return Object(_e.a)(e,[{key:"start",value:function(){var e=this;if(!this.running){var t=Date.now();this.running=!0;setTimeout(function r(){if(e.running){var n=Date.now(),o=n-t;e.targetFunction(o),t=n,setTimeout(r.bind(e),e.targetInterval)}}.bind(this),this.targetInterval)}}},{key:"stop",value:function(){this.running=!1}}]),e}(),Ae=function(){var e=Object(i.c)(),t=Object(n.useState)(1),r=Object(p.a)(t,2),a=r[0],c=r[1];return o.a.createElement("div",{className:"time-factor"},o.a.createElement("form",{onSubmit:function(t){e(function(e){return{type:ve.SET_TIME_FACTOR,payload:{timeFactor:e}}}(a)),t.preventDefault()}},o.a.createElement("input",{type:"number",name:"timeFactor",onChange:function(e){return c(e.target.value)},required:!0}),o.a.createElement("input",{type:"submit",value:"Set time factor"})))};function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ge=function(e){return Object.entries(e).reduce((function(e,t){var r=Object(p.a)(t,2),n=r[0],o=r[1];return o.unlocked&&(e[n]=o),e}),{})},He=function(e,t){for(var r=0,n=Object.entries(e.cost);r<n.length;r++){var o=n[r],a=Object(p.a)(o,2),c=a[0],i=a[1];if(!t[c])return xe({},e,{canAfford:!1});if(t[c].owned<i)return Object.assign({},e,{canAfford:!1})}return Object.assign({},e,{canAfford:!0})},Be=(r(31),function(){var e=Object(i.d)((function(e){return e.warehouse.type})),t=Object(i.d)((function(e){return Ge(e.warehouse.resources)}),i.b),r=Object(i.d)((function(e){return e.warehouse.totalCapacity})),n=g[e],a=Object(i.c)(),c=null;return n.upgradesTo&&He({cost:n.upgradeCost},t).canAfford&&(c=o.a.createElement("button",{onClick:function(){var t;a((t=e,{type:b.UPDGRADE_WAREHOUSE,payload:{toUpgrade:t}}))}},"Upgrade")),o.a.createElement("div",{className:"resource-panel"},o.a.createElement("h4",null,n.name),c,o.a.createElement("div",{className:"resource-list"},Object.keys(t).map((function(e,n){var a=Ee[e].name;return"gold"!==e?o.a.createElement("div",{key:e},a,": ",t[e].owned.toFixed(1)," / ",r):o.a.createElement("div",{key:e},a,": ",t[e].owned.toFixed(1))}))))}),Me=(r(32),function(){var e=Object(i.d)((function(e){return e.couriers}),i.b);Object(i.d)((function(e){return e.buildings}),i.b);var t=e.couriers.map((function(e){return o.a.createElement("div",{className:"courier",key:e.id},o.a.createElement("div",null,e.status),o.a.createElement("div",null,e.progress.toFixed(1)),o.a.createElement("div",null,JSON.stringify(e.payload)))}));return o.a.createElement("div",{className:"courier-monitor"},t)}),Fe=(r(33),function(){var e=Object(i.d)((function(e){return e.warehouse.resources})),t=Object(i.d)((function(t){return function(e,t){return Object.entries(e).reduce((function(e,r){var n=Object(p.a)(r,2),o=n[0],a=n[1];return e[o]=He(a,t),e}),{})}(Ge(t.construction),e)}),i.b),r=Object(i.c)(),n=Object.entries(t).map((function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1],c=g[n],i=Object.keys(a.cost).map((function(e){return o.a.createElement("div",{className:"construction-ingredient",key:e},Ee[e].name,": ",a.cost[e])})),s=null;return s=c.category===f.HOUSE?function(){return r((e=a,{type:m.BUILD_HOUSE,payload:{toConstruct:e}}));var e}:c.category===f.WAREHOUSE?function(){return r((e=a,{type:b.BUILD_WAREHOUSE,payload:{toConstruct:e}}));var e}:function(){return r((e=a,{type:O.CONSTRUCT_BUILDING,payload:{toConstruct:e}}));var e},o.a.createElement("div",{className:"construction",key:n},o.a.createElement("div",{className:"construction-header"},o.a.createElement("h4",null,c.name)),o.a.createElement("div",{className:"description"},o.a.createElement("h5",null,c.description)),o.a.createElement("div",null,"Owned: ",a.owned),o.a.createElement("div",{className:"ingredientList"},i),o.a.createElement("button",{className:"purchase",onClick:s,disabled:!a.canAfford},"Buy"))}));return o.a.createElement("div",{className:"construction-panel"},n)}),We=(r(34),function(e){var t=e.building;return o.a.createElement("div",{className:"building"},o.a.createElement("div",{className:"building-header"},o.a.createElement("h4",null,t.name)),o.a.createElement("div",{className:"status"},t.status),o.a.createElement("div",null,t.progress.toFixed(1)," / ",t.produceTime),o.a.createElement("div",null,"Efficiency: ",t.efficiency),o.a.createElement("div",{className:"inbox"},"Inbox: ",JSON.stringify(t.inbox)),o.a.createElement("div",{className:"outbox"},"Outbox: ",JSON.stringify(t.outbox)),o.a.createElement("button",{onClick:function(){return e.destroyFunc(t)}},"Destroy"))}),Ke=function(){var e=Object(i.d)((function(e){return e.buildings}),i.b),t=Object(i.c)(),r=e.owned,n=function(e){t(function(e){return{type:O.DESTROY_BUILDING,payload:{toDestroy:e}}}(e))},a=Object.values(r).map((function(e){return e.category===f.PRODUCER?o.a.createElement(We,{building:e,key:e.id,destroyFunc:n}):o.a.createElement("div",{className:"building",key:e.id},o.a.createElement("div",{className:"building-header"},o.a.createElement("h4",null,e.name)),o.a.createElement("button",{onClick:function(){return n(e)}},"Destroy"))}));return o.a.createElement("div",{className:"building-panel"},a)},ze=(r(35),function(){var e=Object(i.d)((function(e){return Ge(e.population)}),i.b),t=Object.values(e).map((function(e){var t=ue[e.id].name,r=e.happiness?e.happiness.toFixed():0;return o.a.createElement("div",{className:"population",key:e.id},t,": ",e.owned," / ",e.maxPopulation," Happiness: ",r," ",e.consumeInfo)}));return o.a.createElement("div",{className:"population-panel"},t)}),Ye=(r(36),function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return Ge(e.housing.types)}),i.b),r=Object(i.d)((function(e){return e.population}),i.b),n=Object.keys(t).map((function(n){var a=r[g[n].populationCategory],c=t[n].remainingAscensionRights>0&&a.canAscend,i=c?t[n].remainingAscensionRights:0;return o.a.createElement("div",{className:"housing",key:n},o.a.createElement("div",{className:"housing-data"},g[n].name,": ",t[n].owned),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){e(function(e,t){var r=g[t];return{type:m.ASCEND_HOUSE,payload:{toConstruct:r,fromHouse:e}}}(n,g[n].ascendsTo))},disabled:!c},"Ascend"),i))}));return o.a.createElement("div",{className:"housing-panel"},n)}),qe=function(){var e=Object(i.d)((function(e){return e})),t=Object(i.c)();return o.a.createElement("div",{className:"save-load"},o.a.createElement("button",{onClick:function(){var t=btoa(JSON.stringify(e));navigator.clipboard.writeText(t).then((function(){alert("Saved to clipboard")}))}},"Save"),o.a.createElement("button",{onClick:function(){var e,r=JSON.parse(atob(prompt("Enter load data")));r?t((e=r,{type:l.LOAD_GAME,payload:{saveState:e}})):alert("Invalid save state")}},"Load"))},Je=(r(37),function(){var e=Object(i.d)((function(e){return e.trader}),i.b),t=Object(i.d)((function(e){return e.warehouse}),i.b),r=Object(i.c)();if(0===e.traderId)return o.a.createElement("div",{className:"trade-panel"},o.a.createElement("h4",null,"Your port is empty"),"Timer: ",(e.timeToLeave-e.timer).toFixed());var n=Ge(t.resources),a=n.gold.owned,c=Object.entries(e.wares).map((function(c){var i=Object(p.a)(c,2),s=i[0],u=i[1],l=n[s];if(!l)return null;var d=a>=u.sellPrice&&u.held>0&&l.owned+l.pending-l.reserved<t.totalCapacity,b=u.held<e.maxCapacity&&l.owned>0;return o.a.createElement("div",{className:"trade-good",key:s},Ee[s].name," available: ",u.held,o.a.createElement("button",{onClick:function(){return r((e=s,t=1,n=u.sellPrice,{type:v.BUY_GOODS,payload:{product:e,amount:t,atPrice:n}}));var e,t,n},disabled:!d},"Buy for ",u.sellPrice," Gold"),o.a.createElement("button",{onClick:function(){return r((e=s,t=1,n=u.buyPrice,{type:v.SELL_GOODS,payload:{product:e,amount:t,atPrice:n}}));var e,t,n},disabled:!b},"Sell for ",u.buyPrice," Gold"))}));return o.a.createElement("div",{className:"trade-panel"},o.a.createElement("h4",null,we[e.traderId].name," has visited your island!"),"Timer: ",(e.timeToLeave-e.timer).toFixed(),o.a.createElement("button",{onClick:function(){var t;r((t=e.dismissCost,{type:v.DISMISS_TRADER,payload:{cost:{gold:t}}}))}},"Dismiss for ",e.dismissCost," Gold"),c)}),Qe=.001;var Xe=function(){var e=Object(n.useState)(new Ne((function(e){r((t=e*Qe,{type:l.TICK,payload:{tickIntervalSeconds:t}}));var t}),100)),t=Object(p.a)(e,1)[0],r=Object(i.c)();return Object(n.useEffect)((function(){r({type:l.INIT}),t.start()}),[]),o.a.createElement("div",{className:"game"},o.a.createElement(qe,null),o.a.createElement(Ae,null),o.a.createElement(Be,null),o.a.createElement(Je,null),o.a.createElement(ze,null),o.a.createElement(Ye,null),o.a.createElement(Me,null),o.a.createElement(Fe,null),o.a.createElement(Ke,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(i.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re;return localStorage.getItem("save")&&(e=JSON.parse(atob(prompt("Enter load data")))),e||(e=Re),Object(s.d)(Ce,e,Object(s.a)(u.a)&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}()},o.a.createElement(Xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.e0f054bf.chunk.js.map