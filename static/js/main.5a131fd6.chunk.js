(this["webpackJsonpidle-anno-redux"]=this["webpackJsonpidle-anno-redux"]||[]).push([[0],{62:function(e,t,r){e.exports=r(84)},73:function(e,t,r){},75:function(e,t,r){},76:function(e,t,r){},77:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){},80:function(e,t,r){},81:function(e,t,r){},84:function(e,t,r){"use strict";r.r(t);var a=r(0),o=r.n(a),n=r(9),i=r.n(n),s=r(3),c=r(22),u=r(55),l={INIT:"INIT",TICK:"TICK",SAVE_GAME:"SAVE_GAME",LOAD_GAME:"LOAD_GAME",RESET_SAVE:"RESET_SAVE",CHANGE_NAME:"CHANGE_NAME"};function d(){return{type:l.SAVE_GAME}}var p=r(7);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=r(6),O={BUILD_WAREHOUSE:"BUILD_WAREHOUSE",UPDGRADE_WAREHOUSE:"UPGRADE_WAREHOUSE",UPGRADE_STOREHOUSE:"UPGRADE_STOREHOUSE"};var f={CONSTRUCT_BUILDING:"CONSTRUCT_BUILDING",DESTROY_BUILDING:"DESTROY_BUILDING"};var h={AMENITY:"AMENITY",PRODUCER:"PRODUCER",HOUSE:"HOUSE",WAREHOUSE:"WAREHOUSE",NAVAL:"NAVAL"},v="SHIPYARD",y={AWAITING_RESOURCES:"AWAITING_RESOURCES",WORKING:"WORKING",OUTBOX_FULL:"OUTBOX_FULL",DISABLED:"DISABLED"},w={marketplace:{name:"Marketplace",abbreviation:"M",description:"Provides a place for villagers to meet",category:h.AMENITY,produces:{community:2.5},upkeep:10},chapel:{name:"Chapel",abbreviation:"Ch",description:"A basic building for villagers to worship",category:h.AMENITY,produces:{faith:3},upkeep:15},tavern:{name:"Tavern",abbreviation:"Tv",description:"Provides citizens a place to drink",category:h.AMENITY,produces:{entertainment:9},upkeep:30},church:{name:"Church",abbreviation:"Ch",description:"Provides a larger location to worship",category:h.AMENITY,produces:{faith:12},upkeep:40},prison:{name:"Prison",abbreviation:"Pr",description:"Jails bad folks. Provides a sense of security",category:h.AMENITY,produces:{security:16}},fishinghut:{name:"Fisherman's Hut",abbreviation:"F",description:"Gathers fish",category:h.PRODUCER,consumes:{},produces:{fish:1},produceTime:30,upkeep:15,disabledUpkeep:5},lumberjackhut:{name:"Lumberjack's Hut",abbreviation:"L",description:"Gathers wood",category:h.PRODUCER,consumes:{},produces:{wood:1},produceTime:40,upkeep:5,disabledUpkeep:0},orchard:{name:"Orchard",abbreviation:"O",description:"Grows apples to be turned into cider",category:h.PRODUCER,consumes:{},produces:{apple:1},produceTime:100,upkeep:5,disabledUpkeep:0},ciderfarm:{name:"Cidery",abbreviation:"C",description:"Processes apples into cider",category:h.PRODUCER,consumes:{apple:1},produces:{cider:1},produceTime:40,upkeep:15,disabledUpkeep:5},hempfarm:{name:"Hemp Plantation",abbreviation:"H",description:"Grows hemp",category:h.PRODUCER,consumes:{},produces:{hemp:1},produceTime:60,upkeep:20,disabledUpkeep:10},weavers:{name:"Weaver's Hut",abbreviation:"W",description:"Uses hemp to create clothing",category:h.PRODUCER,consumes:{hemp:1},produces:{linen:1},produceTime:30,upkeep:25,disabledUpkeep:12},stonemason:{name:"Stonemason",abbreviation:"Sm",description:"Turns raw stone into stone bricks",category:h.PRODUCER,consumes:{},produces:{stone:1},produceTime:30,upkeep:20,disabledUpkeep:10},oremine:{name:"Ore mine",abbreviation:"Om",description:"Mines raw ore from the ground",category:h.PRODUCER,consumes:{},produces:{ore:1},produceTime:30,upkeep:20,disabledUpkeep:10},charcoalhut:{name:"Charcoal Burner's Hut",abbreviation:"Cc",description:"Burns wood down into charcoal",category:h.PRODUCER,consumes:{},produces:{charcoal:1},produceTime:30,upkeep:10,disabledUpkeep:0},smelter:{name:"Iron Smelter",abbreviation:"I",description:"Converts raw ore to iron ingots",category:h.PRODUCER,consumes:{ore:1,charcoal:1},produces:{iron:1},produceTime:30,upkeep:20,disabledUpkeep:10},toolmaker:{name:"Toolmaker's Workshop",abbreviation:"TW",description:"Creates tools out of iron",category:h.PRODUCER,consumes:{iron:.5},produces:{tool:1},produceTime:30,upkeep:30,disabledUpkeep:15},ropeyard:{name:"Ropeyard",abbreviation:"Rp",description:"Creates rope from hemp",category:h.PRODUCER,consumes:{hemp:.5},produces:{rope:1},produceTime:30,upkeep:40,disabledUpkeep:20},wheatfield:{name:"Wheat Field",abbreviation:"W",description:"Grows wheat",category:h.PRODUCER,consumes:{},produces:{wheat:1},produceTime:30,upkeep:5,disabledUpkeep:0},mill:{name:"Flour Mill",abbreviation:"FM",description:"Grinds wheat into flour",category:h.PRODUCER,consumes:{wheat:1},produces:{flour:1},produceTime:15,upkeep:30,disabledUpkeep:15},bakery:{name:"Bakery",abbreviation:"Bk",description:"Bakes flour into bread",category:h.PRODUCER,consumes:{flour:1},produces:{bread:1},produceTime:15,upkeep:30,disabledUpkeep:15},weaponsmith:{name:"Weaponsmith",abbreviation:"Ws",description:"Forges weapons",category:h.PRODUCER,consumes:{iron:1},produces:{weapon:1},produceTime:30,upkeep:30,disabledUpkeep:15},hopsfield:{name:"Hops Farm",abbreviation:"HF",description:"Grows Hops",category:h.PRODUCER,consumes:{},produces:{hop:1},produceTime:30,upkeep:10,disabledUpkeep:5},brewery:{name:"Brewery",abbreviation:"Bw",description:"Brews Ale",category:h.PRODUCER,consumes:{hop:1.333,wheat:1.333},produces:{ale:1},produceTime:40,upkeep:30,disabledUpkeep:15},potashpit:{name:"Potash Pit",abbreviation:"Pp",description:"Produces Potash",category:h.PRODUCER,consumes:{},produces:{potash:1},produceTime:30,upkeep:30,disabledUpkeep:15},glasssmelter:{name:"Glass Smelter",abbreviation:"GS",description:"Melts quartz down into glass",category:h.PRODUCER,consumes:{potash:1,quartz:.5},produces:{glass:1},produceTime:60,upkeep:30,disabledUpkeep:15},saltmine:{name:"Salt Mine",abbreviation:"SM",description:"Extracts brine from underground deposits",category:h.PRODUCER,consumes:{},produces:{brine:1},produceTime:15,upkeep:20,disabledUpkeep:10},saltworks:{name:"Saltworks",abbreviation:"SW",description:"Refines brine into salt",category:h.PRODUCER,consumes:{brine:1,charcoal:.5},produces:{salt:1},produceTime:15,upkeep:25,disabledUpkeep:15},pigfarm:{name:"Pig Farm",abbreviation:"PF",description:"Raises pigs for slaughter. Produces hides",category:h.PRODUCER,consumes:{},produces:{hide:1},produceTime:30,upkeep:15,disabledUpkeep:5},tannery:{name:"Tannery",abbreviation:"Tn",description:"Tans hides into leather",category:h.PRODUCER,consumes:{hide:1,salt:.5},produces:{leather:1},produceTime:15,upkeep:20,disabledUpkeep:10},papermill:{name:"Paper Mill",abbreviation:"PM",description:"Produces Paper",category:h.PRODUCER,consumes:{wood:1},produces:{paper:1},produceTime:20,upkeep:50,disabledUpkeep:25},printingpress:{name:"Printing Press",abbreviation:"PP",description:"Prints books",category:h.PRODUCER,consumes:{paper:.5,ink:1},produces:{book:1},produceTime:20,upkeep:50,disabledUpkeep:25},alms:{name:"Alms House",abbreviation:"Ah",description:"Provides shelter for 500 beggars",category:h.HOUSE,upkeep:0,populationCategory:"beggar",populationCap:500},peasanthouse:{name:"Peasant Shack",description:"Basic home for villagers. Houses 8",category:h.HOUSE,upkeep:0,populationCategory:"peasant",populationCap:8,ascendsTo:"citizenhouse"},citizenhouse:{name:"Citizen House",description:"Home for citizens",category:h.HOUSE,upkeep:0,populationCategory:"citizen",populationCap:15,ascendsTo:"patricianhouse",cost:{wood:1,tool:1}},patricianhouse:{name:"Patrician House",description:"Home for patricians",category:h.HOUSE,upkeep:0,populationCategory:"patrician",populationCap:25,ascendsTo:"noblehouse",cost:{wood:1,tool:1,stone:4}},noblehouse:{name:"Noble House",description:"Home for nobles",category:h.HOUSE,upkeep:0,populationCategory:"noble",populationCap:40,cost:{wood:1,tool:1,stone:3,glass:4}},smallwarehouse:{name:"Small Warehouse",description:"Basic warehouse for your island",category:h.WAREHOUSE,upkeep:10,couriers:3,capacity:40,upgradesTo:"mediumwarehouse",upgradeCost:{gold:150,wood:2,tool:3,stone:4}},mediumwarehouse:{name:"Medium Warehouse",description:"Expanded warehouse",category:h.WAREHOUSE,upkeep:15,couriers:1,capacity:10,upgradesTo:"largewarehouse",upgradeCost:{gold:350,wood:2,tool:1,stone:3,glass:2}},largewarehouse:{name:"Large Warehouse",description:"Large Warehouse",category:h.WAREHOUSE,upkeep:20,couriers:1,capacity:10},smallstockpile:{name:"Small Stockpile",abbreviation:"SS",description:"Small depot. Provides 1 courier",category:h.WAREHOUSE,upkeep:10,couriers:1,capacity:0,upgradesTo:"mediumstockpile",upgradeCost:{gold:200,wood:3,tool:1,stone:3}},mediumstockpile:{name:"Medium Stockpile",abbreviation:"MS",description:"Medium depot. Provides 2 couriers, and 5 storage",category:h.WAREHOUSE,upkeep:20,couriers:2,capacity:5,upgradesTo:"largestockpile",upgradeCost:{gold:300,wood:3,tool:1,stone:3,glass:2}},largestockpile:{name:"Large Stockpile",abbreviation:"LS",description:"Large depot. Provides 3 couriers, and 10 storage",category:h.WAREHOUSE,upkeep:30,couriers:3,capacity:5},smallstorehouse:{name:"Small Storehouse",abbreviation:"So",description:"Increases the warehouse capacity",category:h.WAREHOUSE,upkeep:15,couriers:0,capacity:15},smallshipyard:{name:"Small Shipyard",description:"Allows construction of small ships",category:h.NAVAL,subCategory:v,upkeep:10,shipsBuilt:["smalltrader","smallwarship"]},largeshipyard:{name:"Large Shipyard",description:"Allows construction of large vessels",category:h.NAVAL,subCategory:v,upkeep:20,shipsBuilt:["largetrader","largewarship"]},repaircrane:{name:"Repair Crane",description:"Repairs ships that are docked here",category:h.NAVAL,upkeep:20}},E={BUILD_HOUSE:"BUILD_HOUSE",ASCEND_HOUSE:"ASCEND_HOUSE"};var j={BUY_GOODS:"BUY_GOODS",SELL_GOODS:"SELL_GOODS",DISMISS_TRADER:"DISMISS_TRADER"};var P={gold:{name:"Gold",baseTradePrice:1},tool:{name:"Tool",baseTradePrice:15},fish:{name:"Fish",baseTradePrice:3},wood:{name:"Wood",baseTradePrice:1},apple:{name:"Apple",baseTradePrice:.2},cider:{name:"Cider",baseTradePrice:3},spice:{name:"Spice",baseTradePrice:6},hemp:{name:"Hemp",baseTradePrice:4},linen:{name:"Clothing",baseTradePrice:27},stone:{name:"Stone Brick",baseTradePrice:8},ore:{name:"Iron Ore",baseTradePrice:4},charcoal:{name:"Charcoal",baseTradePrice:8},iron:{name:"Iron",baseTradePrice:16},rope:{name:"Rope",baseTradePrice:18},wheat:{name:"Wheat",baseTradePrice:1},flour:{name:"Flour",baseTradePrice:24},bread:{name:"Bread",baseTradePrice:34},weapon:{name:"Weapons",baseTradePrice:24},hop:{name:"Hops",baseTradePrice:2},ale:{name:"Ale",baseTradePrice:14},potash:{name:"Potash",baseTradePrice:10},quartz:{name:"Quartz",baseTradePrice:4},glass:{name:"Glass",baseTradePrice:16},brine:{name:"Brine",baseTradePrice:1},salt:{name:"Salt",baseTradePrice:4},hide:{name:"Hide",baseTradePrice:33},leather:{name:"Leather",baseTradePrice:87},paper:{name:"Paper",baseTradePrice:12},book:{name:"Books",baseTradePrice:30},ink:{name:"Ink",baseTradePrice:9}};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T={reserved:0,pending:0},D={owned:0,unlocked:!1};function I(e,t){for(var r=Object.assign({},e),a=0,o=Object.entries(t);a<o.length;a++){var n=o[a],i=Object(g.a)(n,2),s=i[0],c=i[1],u=Object.assign({},r[s]);u.owned-=c,r[s]=u}return r}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=r(23),A=r.n(C),N={DISABLE_BUILDING:"DISABLE_BUILDING",ENABLE_BUILDING:"ENABLE_BUILDING"};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H={status:y.AWAITING_RESOURCES,progress:0,efficiency:1,efficiencyTimer:0,efficiencySupplied:!1,inbox:{},outbox:{}},B=.01,G=2,x=1,M=100,W=5;function F(e){var t=w[e.buildingId];e.inbox={};for(var r=0,a=Object.keys(t.consumes);r<a.length;r++){var o=a[r];e.inbox[o]=0}e.outbox={};for(var n=0,i=Object.keys(t.produces);n<i.length;n++){var s=i[n];e.outbox[s]=0}}function q(e,t){var r=Object.assign({},e),a=w[r.buildingId];if(!e.enabled)return r.status=y.DISABLED,r.efficiencySupplied&&(r.efficiencySupplied=!1,r.efficiencyTimer=0),r=z(r,t);if(!function(e){for(var t=w[e.buildingId],r=0,a=Object.entries(t.consumes);r<a.length;r++){var o=a[r],n=Object(g.a)(o,2),i=n[0],s=n[1];if(e.inbox[i]<s)return!1}return!0}(r))return r.status=y.AWAITING_RESOURCES,r.efficiencySupplied&&(r.efficiencySupplied=!1,r.efficiencyTimer=0),r=z(r,t);if(!function(e){for(var t=w[e.buildingId],r=0,a=Object.entries(t.produces);r<a.length;r++){var o=a[r],n=Object(g.a)(o,2),i=n[0],s=n[1];if(e.outbox[i]+s>W)return!1}return!0}(r))return r.status=y.OUTBOX_FULL,r.efficiencySupplied&&(r.efficiencySupplied=!1,r.efficiencyTimer=0),r=z(r,t);if(r.status=y.WORKING,r.efficiencySupplied||(r.efficiencySupplied=!0,r.efficiencyTimer=0),(r=z(r,t)).progress+=t*r.efficiency*B,r.progress>a.produceTime){r.progress-=a.produceTime;for(var o=Object.assign({},r.inbox),n=Object.assign({},r.outbox),i=0,s=Object.entries(a.consumes);i<s.length;i++){var c=s[i],u=Object(g.a)(c,2),l=u[0],d=u[1];o[l]-=d}for(var p=0,b=Object.entries(a.produces);p<b.length;p++){var m=b[p],O=Object(g.a)(m,2),f=O[0],h=O[1];n[f]+=h}r.inbox=o,r.outbox=n}return r}function z(e,t){return e.efficiencyTimer+=t,e.efficiencyTimer>G&&(e.efficiencyTimer-=G,e.efficiencySupplied?e.efficiency=Math.min(M,e.efficiency+1):e.efficiency=Math.max(x,e.efficiency-1)),e}var K=r(30);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J="IDLE",Q="PICKING_UP",X="EN_ROUTE",$="DROPPING_OFF",Z={status:J,progress:0,timeThreshold:0,jobDescription:{},payload:{},markedForDeath:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload,a=e.couriers;if(!a)return e;switch(t.type){case l.INIT:var o=w[e.warehouse.type],n=a.couriers.slice(0);te(n,o.couriers);var i=Object.assign({},a);return i.couriers=n,Object.assign({},e,{couriers:i});case O.UPGRADE_STOREHOUSE:var s=w[r.toUpgrade.buildingId],c=w[s.upgradesTo],u=c.couriers-s.couriers,d=Object(K.a)(e.couriers.couriers);te(d,u);var p=V({},e.couriers,{couriers:d});return V({},e,{couriers:p});case O.UPDGRADE_WAREHOUSE:var b=w[r.toUpgrade].upgradesTo,m=w[b],g=Object(K.a)(e.couriers.couriers);te(g,m.couriers);var v=V({},e.couriers,{couriers:g});return V({},e,{couriers:v});case O.BUILD_WAREHOUSE:var y=w[r.toConstruct.id],E=y.couriers,j=Object.assign({},e),P=Object.assign({},j.couriers);j.couriers=P;var S=P.couriers.slice(0);return te(S,E),P.couriers=S,j;case f.DESTROY_BUILDING:var k=w[r.toDestroy.buildingId];if(k.category!==h.WAREHOUSE)return e;for(var T=Object(K.a)(e.couriers.couriers),D=V({},e.couriers,{couriers:T}),I=V({},e,{couriers:D}),U=k.couriers,R=0,C=0;C<T.length;C++){var A=T[C];if(A.status===J&&!A.markmarkedForDeath&&(T.splice(C,1),++R===U))return I}for(var N=T.length-1;N>=0;N--){var _=T[N];if(!_.markmarkedForDeath&&(_.markedForDeath=!0,++R===U))return I}return I;case l.TICK:var L=Object.assign({},e),H=Object.assign({},L.couriers),B=Object.assign({},L.warehouse),G=B.totalCapacity,x=Object.assign({},B.resources);B.resources=x;var M=Object.assign({},L.buildings),F=Object.assign({},M.owned);M.owned=F,L.warehouse=B,L.buildings=M,L.couriers=H;var q=oe(a,B,F),z=a.jobQueue.slice(0).concat(q.jobList),Y=Object.assign({},a.jobQueueMap,q.jobRef),Z=H.couriers.map((function(e){if(e.status===J){var t=Object.assign({},e),r=ne(z,F),a=z[r];if(z=z.slice(r+1),!a)return e;var o=a.from,n=a.to,i=a.carrying,s=null,c=null,u=0;if(s="warehouse"!==o?M.owned[o]:B,c="warehouse"!==n?M.owned[n]:B,"warehouse"===o){var l=W-c.inbox[i],d=Math.floor(x[i].owned-x[i].reserved);u=Math.min(l,d);var p=Object.assign({},x[i]);p.reserved+=u,x[i]=p}else{var b=s.outbox[i],m=Math.floor(G-x[i].owned-x[i].pending);u=Math.min(b,m);var g=Object.assign({},x[i]);g.pending+=u,x[i]=g}return a.amount=u,t.status=Q,t.timeThreshold=8,t.jobDescription=a,t}return e}));H.jobQueue=z,H.jobQueueMap=Y,Z.forEach((function(e){if(e.status!==J&&(e.progress+=r.tickIntervalSeconds,e.progress>=e.timeThreshold)){e.progress-=e.timeThreshold;var t=e.jobDescription,a=t.from,o=t.to,n=t.carrying,i=t.amount,s=null,c=null;switch("warehouse"!==a?F.hasOwnProperty(a)&&(s=Object.assign({},F[a]),F[a]=s):s=B,"warehouse"!==o?F.hasOwnProperty(o)&&(c=Object.assign({},F[o]),F[o]=c):c=B,e.status){case Q:var u=Object.assign({},e.payload);if(e.payload=u,"warehouse"===a){var l=Object.assign({},x[n]);x[n]=l,l.owned-=i,l.reserved-=i,u[n]=i}else{if(!s){e.payload={},e.status=J,e.jobDescription={},e.progress=0,e.timeThreshold=0,delete Y[e.jobDescription.id];break}var d=Object.assign({},s.outbox);s.outbox=d,d[n]-=i,u[n]=i,delete Y[e.jobDescription.id]}e.status=X,e.timeThreshold=20;break;case X:e.status=$,e.timeThreshold=8;break;case $:var p=Object.assign({},e.payload);if("warehouse"===o){var b=Object.assign({},x[n]);x[n]=b,b.owned+=p[n],b.pending-=i}else{if(c){var m=Object.assign({},c.inbox);c.inbox=m,m[n]+=i}else{var g=Object.assign({},x[n]);x[n]=g,g.owned+=p[n]}delete Y[e.jobDescription.id]}e.payload={},e.status=J,e.jobDescription={},e.progress=0,e.timeThreshold=0}}}));var ee=Z.filter((function(e){return e.status!==J||!e.markedForDeath}));return H.couriers=ee,L.couriers=H,L;default:return e}};function te(e,t){for(var r=0;r<t;r++){var a=Object.assign({},Z,{id:A()()});e.push(a)}}var re="_SUPPLY",ae="_PICKUP";function oe(e,t,r){for(var a=e.jobQueueMap,o=t.totalCapacity,n=t.resources,i={jobList:[],jobRef:{}},s=0,c=Object.values(r);s<c.length;s++){var u=c[s];if(w[u.buildingId].category===h.PRODUCER)for(var l=0,d=Object.entries(u.inbox);l<d.length;l++){var p=d[l],b=Object(g.a)(p,2),m=b[0],O=b[1],f=u.id+"_"+m+"_"+re;if(O<W&&!a[f]){var v=n[m];if(Math.floor(v.owned-v.reserved)>0){var y={id:f,from:"warehouse",to:u.id,carrying:m};i.jobList.push(y),i.jobRef[f]=y}}}}var E=Object.values(r).reduce((function(e,t){if(w[t.buildingId].category!==h.PRODUCER)return e;for(var r=0,i=Object.entries(t.outbox);r<i.length;r++){var s=i[r],c=Object(g.a)(s,2),u=c[0],l=c[1],d=t.id+ae;if(l>0&&!a[d]){var p=n[u];if(Math.floor(o-p.owned-p.pending)>0){var b={id:d,from:t.id,to:"warehouse",carrying:u};e.jobList.push(b),e.jobRef[d]=b}}}return e}),{jobList:[],jobRef:{}});return{jobList:i.jobList.concat(E.jobList),jobRef:Object.assign({},i.jobRef,E.jobRef)}}function ne(e,t){for(var r=0;r<e.length;r++){var a=e[r],o=a.from,n=a.to;if(("warehouse"===o||t.hasOwnProperty(o))&&("warehouse"===n||t.hasOwnProperty(n)))return r}}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce={popProgress:0,currentPop:1},ue={peasanthouse:.8,citizenhouse:.6,patrician:.4,noblehouse:0},le={peasanthouse:["peasanthouse","citizenhouse","patricianhouse","noblehouse"],citizenhouse:["citizenhouse","patricianhouse","noblehouse"],patricianhouse:["patricianhouse","noblehouse"],noblehouse:["noblehouse"]};function de(e,t,r){var a=le[r].reduce((function(t,r){return t+e[r].owned}),0);t.totalAscensionRights=Math.floor(ue[r]*a);var o=w[r].ascendsTo,n=le[o].reduce((function(t,r){return t+e[r].owned}),0);t.remainingAscensionRights=t.totalAscensionRights-n}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me={owned:0,maxPopulation:0,happiness:0,canAscend:!1,consumeInfo:""},ge={owned:0,maxPopulation:0,happiness:0,unhoused:0,beggarTimer:0};function Oe(e){return Math.floor(.1*e.citizen.maxPopulation+.2*e.patrician.maxPopulation+.3*e.noble.maxPopulation)}var fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:for(var a=r.tickIntervalSeconds,o=Object.assign({},e),n=e.buildings,i={},s=0,c=Object.values(n.owned);s<c.length;s++){var u=c[s],d=w[u.buildingId];if(d.category===h.AMENITY)for(var p=0,b=Object.entries(d.produces);p<b.length;p++){var m=b[p],O=Object(g.a)(m,2),f=O[0],v=O[1];i[f]||(i[f]=0),i[f]+=v*a*(1/60)}}return o.amenities=i,o;default:return e}},he={beggar:{name:"Beggar",taxRate:0,consumes:{fish:{quantity:.7,weight:0},cider:{quantity:.3,weight:0}}},peasant:{name:"Peasant",taxRate:.96,consumes:{community:{quantity:1,weight:25},fish:{quantity:1,weight:25},cider:{quantity:.44,weight:25},faith:{quantity:1,weight:25}}},citizen:{name:"Citizen",taxRate:1.14,consumes:{fish:{quantity:.4,weight:8},spice:{quantity:.4,weight:12},cider:{quantity:.44,weight:16},linen:{quantity:.42,weight:16},community:{quantity:1,weight:16},faith:{quantity:1,weight:16},entertainment:{quantity:1,weight:16}}},patrician:{name:"Patrician",taxRate:1.26,consumes:{fish:{quantity:.22,weight:2.8},spice:{quantity:.22,weight:4.9},bread:{quantity:.55,weight:6.3},cider:{quantity:.23,weight:4},ale:{quantity:.24,weight:9},linen:{quantity:.19,weight:4.5},leather:{quantity:.28,weight:8.5},community:{quantity:1,weight:12},faith:{quantity:1,weight:12},entertainment:{quantity:1,weight:12},book:{quantity:.16,weight:12},security:{quantity:1,weight:12}}},noble:{name:"Noble",taxRate:1.38,consumes:{}}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:var a=r.tickIntervalSeconds,o=Object.assign({},e),n=Object.assign({},o.warehouse),i=Object.assign({},n.resources);n.resources=i;var s=o.amenities,c=Object.assign({},o.population);o.warehouse=n,o.population=c;for(var u=0,d=Object.entries(e.population);u<d.length;u++){var p=d[u],b=Object(g.a)(p,2),m=b[0],O=b[1],f=Object.assign({},O);f.consumeInfo=null;var h=0;if(0!==O.owned)for(var v=0,y=Object.entries(he[m].consumes);v<y.length;v++){var w=y[v],E=Object(g.a)(w,2),j=E[0],P=E[1],S=P.quantity*f.owned*a*(1/60)*.01,k=1;if(s[j])s[j]<S&&(k=s[j]/S,f.consumeInfo||(f.consumeInfo="Need "+j)),s[j]-=S,s[j]<0&&(s[j]=0);else if(i[j]){var T=Object.assign({},i[j]);i[j]=T,T.owned<S&&(k=T.owned/S,f.consumeInfo||(f.consumeInfo="Need "+j)),T.owned-=S,T.owned<0&&(T.owned=0)}else k=0,f.consumeInfo||(f.consumeInfo="Need "+j);h+=P.weight*k}var D=(h-f.happiness)/100;Math.abs(D)<.001&&(D=.001),f.happiness+=D,c[m]=f}return o;default:return e}},ye=r(56),we=r.n(ye);function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=20,Se=200,ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:var a=r.tickIntervalSeconds,o=Object.assign({},e),n=Object.assign({},o.housing),i=Object.assign({},o.population);o.housing=n,o.population=i;var s={},c=n.abodes.map((function(e){var t=Object.assign({},e),r=i[w[t.houseId].populationCategory].happiness,o=0;r>=40&&t.currentPop<t.populationCap&&(o=1),r<=20&&t.currentPop>0&&(o=-1),t.popProgress+=a*o,(t.popProgress>10||t.popProgress<-10)&&(t.popProgress-=10*o,t.currentPop+=o),t.currentPop<1&&(t.currentPop=1);var n=w[t.houseId].populationCategory;return s[n]||(s[n]=0),s[n]+=t.currentPop,t}));n.abodes=c;for(var u=0,d=Object.entries(s);u<d.length;u++){var p=d[u],b=Object(g.a)(p,2),m=b[0],O=b[1],f=Object.assign({},i[m]);f.owned=O,i[m]=f}var h=je({},i.beggar);if(h.owned<h.maxPopulation&&(h.beggarTimer+=a,h.beggarTimer>1200)){h.beggarTimer-=1200;var v=Te(h.maxPopulation-h.owned);h.owned+=v}return i.beggar=h,o;default:return e}};function Te(e){var t=Math.max(e,Pe),r=Math.min(t,Se);return we()({min:t,max:r,integer:!0})}var De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:var a=r.tickIntervalSeconds,o=Object.assign({},e),n=Object.assign({},o.warehouse),i=Object.assign({},n.resources),s=Object.assign({},i.gold);o.warehouse=n,n.resources=i,i.gold=s;var c={maintenanceCost:0,taxRevenue:0},u=w[n.type].upkeep*a*(1/60),d=Object.values(e.buildings.owned).reduce((function(e,t){return e+(t.enabled?w[t.buildingId].upkeep:w[t.buildingId].disabledUpkeep)*a*(1/60)}),u),p=Object.values(e.population).reduce((function(e,t){var r=.01*t.happiness;return r<.01&&(r=.01),e+he[t.id].taxRate*t.owned*a*(1/60)*r}),0);return c.maintenanceCost=d,c.taxRevenue=p,o.financeInfo=c,s.owned=s.owned+p-d,o;default:return e}},Ie=[["peasant",60],["peasant",90],["citizen",1],["citizen",240],["citizen",355],["patrician",1],["patrician",510],["patrician",690],["patrician",940],["patrician",1190],["noble",950],["noble",2200],["noble",3500],["noble",7500]],Ue=[{title:"Small Settlement",buildings:["marketplace","fishinghut","lumberjackhut"],population:"peasant",resources:["gold","wood","tool","fish"]},{buildings:["orchard","ciderfarm"],resources:["apple","cider"]},{title:"Settlement",buildings:["chapel"]},{population:"citizen",resources:["hemp","linen","stone","spice"],buildings:["hempfarm","weavers","stonemason"],housing:["citizenhouse"]},{resources:["ore","charcoal","iron","rope"],buildings:["oremine","charcoalhut","smelter","toolmaker","ropeyard","smallshipyard"]},{title:"Village",buildings:["smallstorehouse","repaircrane","tavern","alms"]},{population:"patrician",resources:["wheat","flour","bread","weapon"],buildings:["wheatfield","mill","bakery","weaponsmith","largeshipyard"],housing:["patricianhouse"]},{title:"Small Town",resources:["hop","ale","potash","quartz","glass"],buildings:["hopsfield","brewery","potashpit","glasssmelter","church"]},{resources:["brine","salt","hide","leather"],buildings:["saltmine","saltworks","pigfarm","tannery"]},{resources:["paper","book","ink"],buildings:["papermill","printingpress"]},{title:"City",buildings:["prison"]},{title:"Major City"},{title:"Commercial Center"},{title:"Metropolis"},{title:"Cosmopolitan City"}];function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.TICK:var r=Object(g.a)(Ie[e.island.level-1],2),a=r[0],o=r[1],n=e.population[a].owned;if(n>=o){var i=Object.assign({},e),s=Object.assign({},i.island);i.island=s,s.level++;var c=Ue[s.level-1];if(c.title&&(s.title=c.title),c.buildings){var u=Object.assign({},i.construction);i.construction=u,c.buildings.forEach((function(e){var t=Object.assign({},u[e]);t.unlocked=!0,u[e]=t}))}if(c.resources){var d=Object.assign({},i.warehouse),p=Object.assign({},d.resources);i.warehouse=d,d.resources=p,c.resources.forEach((function(e){var t=Object.assign({},p[e]);p[e]=t,t.unlocked=!0}))}if(c.population){var b=Object.assign({},i.population);i.population=b;var m=Object.assign({},b[c.population]);m.unlocked=!0,b[c.population]=m}if(c.housing){var O=Ce({},i.housing.types),f=Ce({},i.housing,{types:O});i.housing=f,c.housing.forEach((function(e){var t=Ce({},O[e],{unlocked:!0});O[e]=t}))}return i}return e;default:return e}},Ne={SET_TIME_FACTOR:"SET_TIME_FACTOR"};function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case Ne.SET_TIME_FACTOR:return Le({},e,{cheat:{timeFactor:r.timeFactor}});default:return e}},Be={lord:{name:"Lord Farquaad",rates:{wood:{buy:.5,sell:1.2},tool:{buy:.5,sell:1.2},stone:{buy:.5,sell:1.2},spice:{buy:1,sell:0}},baseCapacity:30},prince:{name:"Prince Ali",rates:{wood:{buy:1,sell:1},tool:{buy:1,sell:1.2},spice:{buy:0,sell:1.25}},baseCapacity:40}};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Me=360,We=180,Fe={traderId:0,timer:0,timeToLeave:Me,wares:{},newGame:!0,dismissCost:100};function qe(e){if(0!==e.traderId){var t=xe({},e);return t.traderId=0,t.wares={},t.time=0,t.timeToLeave=We,t}var r=Object.keys(Be),a=r[Math.floor(Math.random()*r.length)];e.newGame&&(e.newGame=!1,a="lord");for(var o=Be[a],n={},i=o.baseCapacity,s=xe({},e,{traderId:a,wares:n,maxCapacity:i,timeToLeave:Me}),c=0,u=Object.entries(o.rates);c<u.length;c++){var l=u[c],d=Object(g.a)(l,2),p=d[0],b=d[1],m=P[p].baseTradePrice,O=b.buy*m,f=b.sell*m;n[p]={buyPrice:O,sellPrice:f,held:0},f>0&&(n[p].held=Math.floor(.75*i))}return s}var ze={flagship:{typeName:"Flagship",cargoSlots:4,speed:1,loadFactor:.2,hp:600,attack:6,maintenance:0,cost:{gold:3500}},smalltrader:{typeName:"Small Trading Ship",cargoSlots:3,speed:.86,loadFactor:.15,hp:400,attack:0,maintenance:15,points:1,cost:{gold:1500,wood:15,rope:20}},smallwarship:{typeName:"Small Warship",cargoSlots:1,speed:1.07,loadFactor:.3,hp:500,attack:6,maintenance:30,points:1,cost:{gold:2e3,wood:30,rope:30,weapon:20}},largetrader:{typeName:"Large Trading Vessel",cargoSlots:6,speed:.97,loadFactor:.1,hp:1e3,attack:0,maintenance:50,points:2,cost:{gold:4e3,wood:60,rope:60}},largewarship:{typeName:"Large Warship",cargoSlots:2,speed:.97,loadFactor:.25,hp:1200,attack:14,maintenance:60,points:2,cost:{gold:4500,wood:70,rope:70,cannon:20}},corsair:{typeName:"Pirate Corsair",speed:.86,hp:500,attack:7,points:1},smallpiratewarship:{typeName:"Small Pirate Warship",speed:.97,hp:800,attack:8,points:2},largepiratewarship:{typeName:"Large Pirate Warship",speed:1.07,hp:1e3,attack:10,points:3}};function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ve={cargo:{}},Je={currentLocation:"home",currentDestination:null,ships:[]},Qe={island:{level:1,title:"Small Settlement",name:"Townsville"},construction:{peasanthouse:{id:"peasanthouse",owned:0,cost:{wood:2},unlocked:!0},marketplace:{id:"marketplace",owned:0,cost:{gold:400,wood:5,tool:3},unlocked:!0},fishinghut:{id:"fishinghut",owned:0,cost:{gold:100,wood:3,tool:2},unlocked:!0},lumberjackhut:{id:"lumberjackhut",owned:0,cost:{gold:50,tool:2},unlocked:!0},smallstockpile:{id:"smallstockpile",owned:0,cost:{gold:200,wood:2,tool:3},unlocked:!0},orchard:{id:"orchard",owned:0,cost:{gold:25},unlocked:!1},ciderfarm:{id:"ciderfarm",owned:0,cost:{gold:100,wood:5,tool:1},unlocked:!1},chapel:{id:"chapel",owned:0,cost:{gold:800,wood:12,tool:5},unlocked:!1},hempfarm:{id:"hempfarm",owned:0,cost:{gold:400,wood:5,tool:2},unlocked:!1},weavers:{id:"weavers",owned:0,cost:{gold:400,wood:5,tool:3}},stonemason:{id:"stonemason",owned:0,cost:{gold:400,wood:2,tool:2}},oremine:{id:"oremine",owned:0,cost:{gold:900,wood:12,tool:2,stone:2}},charcoalhut:{id:"charcoalhut",owned:0,cost:{gold:250,wood:3,tool:2,stone:2}},smelter:{id:"smelter",owned:0,cost:{gold:600,wood:10,tool:5,stone:2}},toolmaker:{id:"toolmaker",owned:0,cost:{gold:500,wood:8,tool:5,stone:2}},ropeyard:{id:"ropeyard",owned:0,cost:{gold:700,wood:12,tool:5}},smallshipyard:{id:"smallshipyard",owned:0,cost:{gold:680,wood:10,tool:5,stone:4}},smallstorehouse:{id:"smallstorehouse",owned:0,cost:{gold:1020,wood:4,tool:4,stone:1}},repaircrane:{id:"repaircrane",owned:0,cost:{gold:1020,wood:5,tool:5,stone:9}},tavern:{id:"tavern",owned:0,cost:{gold:1e3,tool:5,stone:10}},alms:{id:"alms",owned:0,cost:{gold:200,wood:5,tool:5}},wheatfield:{id:"wheatfield",owned:0,cost:{gold:200,wood:3,tool:2}},mill:{id:"mill",owned:0,cost:{gold:800,wood:8,tool:4,stone:4}},bakery:{id:"bakery",owned:0,cost:{gold:700,wood:5,tool:5,stone:5}},weaponsmith:{id:"weaponsmith",owned:0,cost:{gold:1500,wood:3,tool:5,stone:10}},largeshipyard:{id:"largeshipyard",owned:0,cost:{gold:2120,wood:20,tool:25,stone:46}},hopsfield:{id:"hopsfield",owned:0,cost:{gold:200,wood:5,tool:2,stone:4}},brewery:{id:"brewery",owned:0,cost:{gold:600,wood:5,tool:4,stone:6}},potashpit:{id:"potashpit",owned:0,cost:{gold:500,wood:6,tool:4,stone:8}},glasssmelter:{id:"glasssmelter",owned:0,cost:{gold:1200,wood:10,tool:5,stone:12}},church:{id:"church",owned:0,cost:{gold:5e3,wood:30,tool:10,stone:40,glass:25}},saltmine:{id:"saltmine",owned:0,cost:{gold:800,wood:11,tool:4,stone:5}},saltworks:{id:"saltworks",owned:0,cost:{gold:900,wood:3,tool:5,stone:6}},pigfarm:{id:"pigfarm",owned:0,cost:{gold:400,wood:4,tool:4,stone:3}},tannery:{id:"tannery",owned:0,cost:{gold:700,wood:7,tool:3,stone:8}},papermill:{id:"papermill",owned:0,cost:{gold:1500,wood:5,tool:5,stone:12}},printingpress:{id:"printingpress",owned:0,cost:{gold:1800,wood:5,tool:5,stone:12,glass:10}},prison:{id:"prison",owned:0,cost:{gold:7e3,wood:20,tool:30,stone:60,glass:24}}},buildings:{owned:{}},warehouse:{type:"smallwarehouse",totalCapacity:40,resources:{gold:{id:"gold",owned:5e3,unlocked:!0},tool:{id:"tool",owned:40,unlocked:!0},fish:{id:"fish",owned:2,unlocked:!0},wood:{id:"wood",owned:40,unlocked:!0}}},couriers:{couriers:[],jobQueue:[],jobQueueMap:{}},housing:{types:{peasanthouse:{owned:0,totalAscensionRights:0,remainingAscensionRights:0,unlocked:!0},citizenhouse:{owned:0,totalAscensionRights:0,remainingAscensionRights:0,unlocked:!1},patricianhouse:{owned:0,totalAscensionRights:0,remainingAscensionRights:0,unlocked:!1},noblehouse:{owned:0,totalAscensionRights:0,remainingAscensionRights:0,unlocked:!1}},abodes:[]},population:{beggar:{id:"beggar",unlocked:!0},peasant:{id:"peasant",unlocked:!0},citizen:{id:"citizen",unlocked:!1},patrician:{id:"patrician",unlocked:!1},noble:{id:"noble",unlocked:!1}}},Xe=Object(c.c)({cheat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},island:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.CHANGE_NAME:return m({},e,{name:r.name});default:return e}},warehouse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.INIT:var a=Object.assign({},e),o=k({},a.resources);Object.keys(P).forEach((function(e){o.hasOwnProperty(e)||(o[e]=k({},D,{id:e}))}));var n=Object.entries(o).reduce((function(e,t){var r=Object(g.a)(t,2),a=r[0],o=r[1],n=Object.assign({},o,T);return e[a]=n,e}),o);return a.resources=n,a;case E.BUILD_HOUSE:case E.ASCEND_HOUSE:case f.CONSTRUCT_BUILDING:var i=Object.assign({},e),s=r.toConstruct.cost,c=I(i.resources,s);return i.resources=c,i;case O.BUILD_WAREHOUSE:var u=Object.assign({},e),d=r.toConstruct.cost,b=I(u.resources,d);u.resources=b;var m=w[r.toConstruct.id];return u.totalCapacity+=m.capacity,u;case O.UPDGRADE_WAREHOUSE:var h=Object.assign({},e),v=w[e.type],y=w[v.upgradesTo];if(!y)return e;var S=v.upgradeCost,U=I(h.resources,S);return h.resources=U,h.totalCapacity+=y.capacity,h.type=w[e.type].upgradesTo,h;case O.UPGRADE_STOREHOUSE:var R=Object.assign({},e),C=w[r.toUpgrade.buildingId],A=w[C.upgradesTo];if(!A)return e;var N=C.upgradeCost,_=I(R.resources,N);return R.resources=_,R.totalCapacity+=A.capacity,R;case j.DISMISS_TRADER:var L=r.cost,H=I(e.resources,L);return k({},e,{resources:H});case j.BUY_GOODS:var B=r.product,G=r.amount,x=r.atPrice,M=k({},e.resources.gold);M.owned-=G*x;var W=k({},e.resources[B]);W.owned+=G;var F=k({},e.resources,Object(p.a)({gold:M},B,W));return k({},e,{resources:F});case j.SELL_GOODS:var q=r.product,z=r.amount,K=r.atPrice,Y=k({},e.resources.gold);Y.owned+=z*K;var V=k({},e.resources[q]);V.owned-=z;var J=k({},e.resources,Object(p.a)({gold:Y},q,V));return k({},e,{resources:J});default:return e}},construction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case O.BUILD_WAREHOUSE:case E.BUILD_HOUSE:case f.CONSTRUCT_BUILDING:var a=r.toConstruct.id,o=e[a],n=Object.assign({},o,{owned:o.owned+1});return Object.assign({},e,Object(p.a)({},a,n));case f.DESTROY_BUILDING:var i=r.toDestroy.buildingId,s=R({},e[i]);return s.owned--,R({},e,Object(p.a)({},i,s));default:return e}},buildings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.TICK:if(!e.owned)return e;var a=Object.assign({},e),o=Object.assign({},a.owned);a.owned=o;var n=r.tickIntervalSeconds;return Object.values(e.owned).forEach((function(e){var t=null;t=w[e.buildingId].category===h.PRODUCER?q(e,n):e,o[t.id]=t})),a;case O.BUILD_WAREHOUSE:case f.CONSTRUCT_BUILDING:var i=w[r.toConstruct.id],s=Object.assign({},{id:A()(),buildingId:r.toConstruct.id,enabled:!0});i.category===h.PRODUCER&&F(s=Object.assign(s,H));var c=Object.assign({},e.owned);return c[s.id]=s,Object.assign({},e,{owned:c});case O.UPGRADE_STOREHOUSE:var u=L({},e.owned[r.toUpgrade.id]);u.buildingId=w[r.toUpgrade.buildingId].upgradesTo;var d=L({},e.owned,Object(p.a)({},r.toUpgrade.id,u));return L({},e,{owned:d});case f.DESTROY_BUILDING:var b=r.toDestroy,m=L({},e.owned);return delete m[b.id],L({},e,{owned:m});case N.DISABLE_BUILDING:var g=r.id,v=L({},e.owned[g],{enabled:!1}),y=L({},e.owned,Object(p.a)({},g,v));return L({},e,{owned:y});case N.ENABLE_BUILDING:var E=r.id,j=L({},e.owned[E],{enabled:!0}),P=L({},e.owned,Object(p.a)({},E,j));return L({},e,{owned:P});default:return e}},couriers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},housing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case E.BUILD_HOUSE:var a=Object.assign({},e),o=Object.assign({},a.types),n=a.abodes.slice(0);a.types=o,a.abodes=n;var i=r.toConstruct.id,s=Object.assign({},o[i]);o[i]=s;var c=w[i],u=se({},ce,{houseId:i,populationCap:c.populationCap});return s.owned+=1,n.push(u),de(o,s,i),a;case E.ASCEND_HOUSE:var l,d=r.fromHouse,b=w[d].ascendsTo,m=se({},e.types[d]),g=se({},e.types[b]),O=se({},e.types,(l={},Object(p.a)(l,d,m),Object(p.a)(l,b,g),l)),f=Object(K.a)(e.abodes),h=se({},e,{types:O,abodes:f}),v=w[b],y=f.findIndex((function(e){return e.houseId===d}));return f.splice(y,1),f.push(se({},v,{},ce,{houseId:b})),m.owned-=1,g.owned+=1,de(O,m,d),de(O,g,b),h;default:return e}},population:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case l.INIT:for(var a=Object.assign({},e),o=0,n=Object.entries(a);o<n.length;o++){var i=n[o],s=Object(g.a)(i,2),c=s[0],u=s[1];if("beggar"===c)a[c]=be({},ge,{},u);else{var d=Object.assign({},u,me);a[c]=d}}return a;case E.BUILD_HOUSE:var b=w[r.toConstruct.id],m=Object.assign({},e),O=Object.assign({},m[b.populationCategory]);return m[O.id]=O,O.maxPopulation+=b.populationCap,m;case l.TICK:for(var f=Object.assign({},e),h=0,v=Object.entries(f);h<v.length;h++){var y=v[h],j=Object(g.a)(y,2),P=j[0],S=j[1];S.happiness>97&&S.owned===S.maxPopulation?f[P]=be({},S,{canAscend:!0}):f[P]=be({},S,{canAscend:!1})}return f;case E.ASCEND_HOUSE:var k,T=w[r.fromHouse],D=w[T.ascendsTo],I=be({},e[T.populationCategory]),U=be({},e[D.populationCategory]);I.owned-=T.populationCap,U.owned+=T.populationCap,I.maxPopulation-=T.populationCap,U.maxPopulation+=D.populationCap;var R=be({},e,(k={},Object(p.a)(k,T.populationCategory,I),Object(p.a)(k,D.populationCategory,U),k)),C=Oe(R);return R.beggar=be({},R.beggar,{maxPopulation:C}),R;default:return e}},trader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case j.BUY_GOODS:var a=r.product,o=r.amount,n=xe({},e.wares),i=xe({},e,{wares:n});return n[a].held-=o,i;case j.SELL_GOODS:var s=r.product,c=r.amount,u=xe({},e.wares),d=xe({},e,{wares:u});return u[s].held+=c,d;case l.TICK:var p=r.tickIntervalSeconds,b=xe({},e);return b.timer+=p,b.timer>b.timeToLeave?(b.timer-=b.timeToLeave,qe(b)):b;case j.DISMISS_TRADER:var m=qe(e);return m;default:return e}},navy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t.payload;switch(t.type){case l.INIT:var r=Ye({},Ve,{id:A()(),typeName:"flagship",currentHp:ze.flagship.hp,name:"Flagship"}),a=Object(p.a)({},r.id,r),o=Object(p.a)({},A()(),Ye({},Je,{name:"Fleet 1",ships:[r.id]})),n={};return{ships:a,fleets:o,dockBuildings:n}}return e}});var $e=function e(t,r){if(r.type===l.SAVE_GAME)return localStorage.setItem("save",btoa(JSON.stringify(t))),t;if(r.type===l.RESET_SAVE){var a=Qe;return a=e(a,{type:l.INIT})}if(r.type===l.LOAD_GAME)return r.payload.saveState;if(r.type===l.TICK){var o=t.cheat.timeFactor;o||(o=1),r.payload.tickIntervalSeconds*=o}var n=He(t,r),i=Xe(n,r),s=ee(i,r),c=fe(s,r),u=ve(c,r),d=ke(u,r),p=De(d,r);return Ae(p,r)};r(73),r(74);var Ze=r(57),et=r(58),tt=function(){function e(t,r){Object(Ze.a)(this,e),this.targetFunction=t,this.targetInterval=r,this.running=!1}return Object(et.a)(e,[{key:"start",value:function(){var e=this;if(!this.running){var t=Date.now();this.running=!0;setTimeout(function r(){if(e.running){var a=Date.now(),o=a-t;e.targetFunction(o),t=a,setTimeout(r.bind(e),e.targetInterval)}}.bind(this),this.targetInterval)}}},{key:"stop",value:function(){this.running=!1}}]),e}(),rt=r(61),at=r(17),ot=function(){var e=Object(s.d)((function(e){return e.island.name})),t=Object(s.d)((function(e){return e.island.title})),r=Object(s.c)();return o.a.createElement("div",{className:"title"},o.a.createElement("h4",null,"The ",t," of ",e),o.a.createElement("button",{onClick:function(){var e=prompt("Enter name");e&&r(function(e){return{type:l.CHANGE_NAME,payload:{name:e}}}(e.substring(0,100)))}},"Change Name"))},nt=function(){var e=Object(s.c)(),t=Object(a.useState)(1),r=Object(g.a)(t,2),n=r[0],i=r[1];return o.a.createElement("div",{className:"time-factor"},o.a.createElement("form",{onSubmit:function(t){e(function(e){return{type:Ne.SET_TIME_FACTOR,payload:{timeFactor:e}}}(n)),t.preventDefault()}},o.a.createElement("input",{type:"number",name:"timeFactor",onChange:function(e){return i(e.target.value)},required:!0}),o.a.createElement("input",{type:"submit",value:"Set time factor"})))};function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ct=function(e){return Object.entries(e).reduce((function(e,t){var r=Object(g.a)(t,2),a=r[0],o=r[1];return o.unlocked&&(e[a]=o),e}),{})},ut=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cost",a=0,o=Object.entries(e[r]);a<o.length;a++){var n=o[a],i=Object(g.a)(n,2),s=i[0],c=i[1];if(!t[s])return st({},e,{canAfford:!1});if(t[s].owned<c)return Object.assign({},e,{canAfford:!1})}return Object.assign({},e,{canAfford:!0})},lt=r(16),dt=r(43),pt=r(46),bt=function(e){var t=e.cost,r=Object.entries(t).map((function(e){var t=Object(g.a)(e,2),r=t[0],a=t[1];return o.a.createElement("div",{className:"construction-ingredient",key:r},P[r].name,": ",a)})),a=e.header?e.header:"Cost",n=o.a.createElement(pt.a,{id:"Price"},o.a.createElement(pt.a.Title,{as:"h3"},a),o.a.createElement(pt.a.Content,null,r));return o.a.createElement(dt.a,{placement:"top",delay:{show:500,hide:250},overlay:n},e.children)},mt=(r(75),function(){var e=Object(s.d)((function(e){return e.warehouse.type})),t=Object(s.d)((function(e){return ct(e.warehouse.resources)}),s.b),r=Object(s.d)((function(e){return e.warehouse.totalCapacity})),a=w[e],n=Object(s.c)(),i=null;if(a.upgradesTo){var c=ut({cost:a.upgradeCost},t).canAfford;i=o.a.createElement(bt,{cost:a.upgradeCost,header:"Upgrade for"},o.a.createElement("div",null,o.a.createElement(lt.a,{variant:"primary",size:"sm",onClick:function(){var t;n((t=e,{type:O.UPDGRADE_WAREHOUSE,payload:{toUpgrade:t}}))},disabled:!c},"Upgrade")))}return o.a.createElement("div",{className:"resource-panel"},o.a.createElement("h4",null,a.name),i,o.a.createElement("div",{className:"resource-list"},Object.keys(t).map((function(e,a){var n=P[e].name;return"gold"!==e?o.a.createElement("div",{key:e},n,": ",t[e].owned.toFixed(1)," / ",r):o.a.createElement("div",{key:e},n,": ",t[e].owned.toFixed(1))}))))}),gt=(r(76),function(){var e=Object(s.d)((function(e){return e.couriers}),s.b);Object(s.d)((function(e){return e.buildings}),s.b);var t=e.couriers.map((function(e){return o.a.createElement("div",{className:"courier",key:e.id},o.a.createElement("div",null,e.status),o.a.createElement("div",null,e.progress.toFixed(1)),o.a.createElement("div",null,JSON.stringify(e.payload)))}));return o.a.createElement("div",{className:"courier-monitor"},t)}),Ot=r(20),ft=(r(77),function(){var e=Object(s.d)((function(e){return e.warehouse.resources})),t=Object(s.d)((function(t){return function(e,t){return Object.entries(e).reduce((function(e,r){var a=Object(g.a)(r,2),o=a[0],n=a[1];return e[o]=ut(n,t),e}),{})}(ct(t.construction),e)}),s.b),r=Object(s.c)(),a=Object.entries(t).map((function(e){var t=Object(g.a)(e,2),a=t[0],n=t[1],i=w[a],s=null;return s=i.category===h.HOUSE?function(){return r((e=n,{type:E.BUILD_HOUSE,payload:{toConstruct:e}}));var e}:i.category===h.WAREHOUSE?function(){return r((e=n,{type:O.BUILD_WAREHOUSE,payload:{toConstruct:e}}));var e}:function(){return r((e=n,{type:f.CONSTRUCT_BUILDING,payload:{toConstruct:e}}));var e},o.a.createElement("div",{className:"construction",key:a},o.a.createElement("div",{className:"construction-header"},o.a.createElement("p",null,i.name," ",i.abbreviation&&"("+i.abbreviation+")")),o.a.createElement("div",null,"Built: ",n.owned),o.a.createElement(bt,{cost:n.cost,header:i.description},o.a.createElement("div",null,o.a.createElement(lt.a,{variant:"primary",size:"sm",className:"purchase",onClick:s,disabled:!n.canAfford},"Buy"))))}));return o.a.createElement(Ot.a,{className:"construction-panel"},a)}),ht=r(60),vt=r(31),yt=function(e){var t=Object(s.d)((function(e){return e.warehouse.resources}),s.b),r=Object(s.c)(),a=e.building,n=w[a.buildingId];n.upgradesTo&&(n=ut(n,t,"upgradeCost"));var i=function(e){r(function(e){return{type:f.DESTROY_BUILDING,payload:{toDestroy:e}}}(e))},c=function(e){var t;e.enabled?r((t=e.id,{type:N.DISABLE_BUILDING,payload:{id:t}})):r(function(e){return{type:N.ENABLE_BUILDING,payload:{id:e}}}(e.id))},u=function(e){var t;r((t=e,{type:O.UPGRADE_STOREHOUSE,payload:{toUpgrade:t}}))};return o.a.createElement(vt.a,{show:e.show,onHide:e.onClose},o.a.createElement(vt.a.Header,{closeButton:!0},o.a.createElement(vt.a.Title,null,n.name)),o.a.createElement(vt.a.Body,null,o.a.createElement("p",null,n.description),n.category===h.PRODUCER&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,a.status),o.a.createElement("div",null,"Efficiency: ",a.efficiency),o.a.createElement("div",{className:"inbox"},"Inbox: ",JSON.stringify(a.inbox)),o.a.createElement("div",{className:"outbox"},"Outbox: ",JSON.stringify(a.outbox)))),o.a.createElement(vt.a.Footer,null,n.category===h.PRODUCER&&o.a.createElement(lt.a,{variant:"warning",size:"sm",onClick:function(){return c(a)}},a.enabled?"Disable":"Enable"),n.upgradesTo&&o.a.createElement(bt,{cost:n.upgradeCost},o.a.createElement("div",null,o.a.createElement(lt.a,{variant:"primary",size:"sm",disabled:!n.canAfford,onClick:function(){return u(a)}},"Upgrade"))),o.a.createElement(lt.a,{variant:"danger",size:"sm",onClick:function(){return i(a)}},"Destroy")))},wt=function(e){var t=Object(a.useState)(!1),r=Object(g.a)(t,2),n=r[0],i=r[1],s=e.building,c=w[s.buildingId].name,u=null;if(w[s.buildingId].category!==h.PRODUCER)u="working";else switch(s.status){case y.DISABLED:u="disabled",c+=" (Disabled)";break;case y.AWAITING_RESOURCES:u="awaiting",c+=" - Awaiting resources!";break;case y.OUTBOX_FULL:u="outbox-full",c+=" - Outbox full!";break;case y.WORKING:u="working"}return o.a.createElement(o.a.Fragment,null,o.a.createElement(yt,{show:n,onClose:function(){return i(!1)},building:s}),o.a.createElement(dt.a,{placement:"top",delay:{show:250,hide:250},overlay:function(e){return o.a.createElement(ht.a,Object.assign({},e,{id:c}),c)}},o.a.createElement("div",{className:"building-icon "+u,onClick:function(){return i(!0)}},w[s.buildingId].abbreviation)))},Et=(r(78),function(){var e=Object(s.d)((function(e){return e.buildings.owned}),s.b),t=Object.values(e).map((function(e){return o.a.createElement(wt,{building:e,key:e.id})}));return o.a.createElement(Ot.a,null,o.a.createElement("div",{className:"building-panel"},t))}),jt=(r(79),function(){var e=Object(s.d)((function(e){return ct(e.population)}),s.b),t=Object.values(e).map((function(e){var t=he[e.id].name,r=e.happiness?e.happiness.toFixed():0,a=null;return"beggar"===e.id&&(a=1200-e.beggarTimer),o.a.createElement("div",{className:"population",key:e.id},t,": ",e.owned," / ",e.maxPopulation," Happiness: ",r," ",e.consumeInfo," --- ",a)}));return o.a.createElement("div",{className:"population-panel"},t)}),Pt=(r(80),function(){var e=Object(s.d)((function(e){return e.warehouse.resources}),s.b),t=Object(s.c)(),r=Object(s.d)((function(e){return ct(e.housing.types)}),s.b),a=Object(s.d)((function(e){return e.population}),s.b),n=Object.keys(r).map((function(n){var i=w[n],s=w[i.ascendsTo];s&&(s=ut(s,e));var c=a[i.populationCategory],u=r[n].remainingAscensionRights>0&&c.canAscend&&s.canAfford,l=u?r[n].remainingAscensionRights:0;return o.a.createElement("div",{className:"housing",key:n},o.a.createElement("div",{className:"housing-data"},i.name,": ",r[n].owned),s&&o.a.createElement(bt,{cost:s.cost,header:l+" ascensions available"},o.a.createElement("div",null,o.a.createElement(lt.a,{variant:"primary",size:"sm",onClick:function(){t(function(e,t){var r=w[t];return{type:E.ASCEND_HOUSE,payload:{toConstruct:r,fromHouse:e}}}(n,i.ascendsTo))},disabled:!u},"Ascend"))))}));return o.a.createElement("div",{className:"housing-panel"},n)}),St=function(){var e=Object(s.c)();return o.a.createElement("div",{className:"save-load"},o.a.createElement("button",{onClick:function(){e(d());var t=localStorage.getItem("save");navigator.clipboard.writeText(t).then((function(){alert("Saved to clipboard")}))}},"Save"),o.a.createElement("button",{onClick:function(){var t,r=JSON.parse(atob(prompt("Enter load data")));r?e((t=r,{type:l.LOAD_GAME,payload:{saveState:t}})):alert("Invalid save state")}},"Load"),o.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to clear your save?")&&e({type:l.RESET_SAVE})}},"RESET"))},kt=(r(81),function(){var e=Object(s.d)((function(e){return e.trader}),s.b),t=Object(s.d)((function(e){return e.warehouse}),s.b),r=Object(s.c)();if(0===e.traderId)return o.a.createElement("div",{className:"trade-panel"},o.a.createElement("h4",null,"Your port is empty"),"Timer: ",(e.timeToLeave-e.timer).toFixed());var a=ct(t.resources),n=a.gold.owned,i=Object.entries(e.wares).map((function(i){var s=Object(g.a)(i,2),c=s[0],u=s[1],l=a[c];if(!l)return null;var d=n>=u.sellPrice&&u.held>0&&l.owned+l.pending-l.reserved<t.totalCapacity,p=u.held<e.maxCapacity&&l.owned>0;return o.a.createElement("div",{className:"trade-good",key:c},P[c].name," available: ",u.held,o.a.createElement("button",{onClick:function(){return r((e=c,t=1,a=u.sellPrice,{type:j.BUY_GOODS,payload:{product:e,amount:t,atPrice:a}}));var e,t,a},disabled:!d},"Buy for ",u.sellPrice," Gold"),o.a.createElement("button",{onClick:function(){return r((e=c,t=1,a=u.buyPrice,{type:j.SELL_GOODS,payload:{product:e,amount:t,atPrice:a}}));var e,t,a},disabled:!p},"Sell for ",u.buyPrice," Gold"))}));return o.a.createElement("div",{className:"trade-panel"},o.a.createElement("h4",null,Be[e.traderId].name," has visited your island!"),"Timer: ",(e.timeToLeave-e.timer).toFixed(),o.a.createElement("button",{onClick:function(){var t;r((t=e.dismissCost,{type:j.DISMISS_TRADER,payload:{cost:{gold:t}}}))}},"Dismiss for ",e.dismissCost," Gold"),i)}),Tt=function(){var e=Object(s.d)((function(e){return e.island.level})),t=Ie[e-1];if(!t)return o.a.createElement("div",null);var r=he[t[0]].name,a=t[1];return o.a.createElement("div",{className:"milestone"},o.a.createElement("p",null,"New unlocks at ",a," ",r,"s"))},Dt=r(34),It=r(28),Ut=r(29),Rt=function(e){var t=Object(s.d)((function(t){return t.navy.fleets[e.fleetId]}),s.b);Object(s.d)((function(e){return e.navy.ships}),s.b);return t?o.a.createElement(Ot.a,{fluid:!0},o.a.createElement(Dt.a,null,o.a.createElement(It.a,null,o.a.createElement("h4",null,t.name))),o.a.createElement(Dt.a,null,o.a.createElement(It.a,null,"Ships in this fleet:"))):o.a.createElement(o.a.Fragment,null)},Ct=function(){var e=Object(s.d)((function(e){return e.navy.fleets}),s.b),t=Object(a.useState)(null),r=Object(g.a)(t,2),n=r[0],i=r[1],c=Object.entries(e).map((function(e){var t=Object(g.a)(e,2),r=t[0],a=t[1],n=a.ships.length;return o.a.createElement(Ut.a.Item,{key:r},o.a.createElement(Ut.a.Link,{eventKey:r},o.a.createElement("h5",null,a.name),n," Ships"))}));return o.a.createElement(Ot.a,{id:"fleet-view",fluid:!0},o.a.createElement(at.a.Container,{id:"fleet-selector",activeKey:n,onSelect:function(e){return i(e)}},o.a.createElement(Dt.a,null,o.a.createElement(It.a,{sm:2},o.a.createElement(Ut.a,{variant:"pills",className:"flex-column"},c)),o.a.createElement(It.a,{sm:10},o.a.createElement(at.a.Content,null,o.a.createElement(at.a.Pane,{eventKey:n},o.a.createElement(Rt,{fleetId:n})))))))},At=.001;var Nt=function(){var e=Object(a.useState)(new tt((function(e){i((t=e*At,{type:l.TICK,payload:{tickIntervalSeconds:t}}));var t}),100)),t=Object(g.a)(e,1)[0],r=Object(a.useState)(new tt((function(){i(d()),console.log("Saved")}),3e4)),n=Object(g.a)(r,1)[0],i=Object(s.c)();return Object(a.useEffect)((function(){t.start(),n.start()}),[]),o.a.createElement("div",{className:"game"},o.a.createElement(ot,null),o.a.createElement(Tt,null),o.a.createElement(rt.a,{defaultActiveKey:"buildings"},o.a.createElement(at.a,{eventKey:"buildings",title:"Buildings"},o.a.createElement(ft,null),o.a.createElement(Et,null)),o.a.createElement(at.a,{eventKey:"resources",title:"Resources"},o.a.createElement(mt,null),o.a.createElement(gt,null)),o.a.createElement(at.a,{eventKey:"population",title:"Houses"},o.a.createElement(jt,null),o.a.createElement(Pt,null)),o.a.createElement(at.a,{eventKey:"port",title:"Port"},o.a.createElement(kt,null),o.a.createElement(Ct,null)),o.a.createElement(at.a,{eventKey:"settings",title:"Settings"},o.a.createElement(St,null),o.a.createElement(nt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(s.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=localStorage.getItem("save"),r=!1;return t&&(e=JSON.parse(atob(t)),r=!0),r||(e=$e(null,{type:"RESET_SAVE"})),Object(c.d)($e,e,Object(c.a)(u.a)&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}()},o.a.createElement(Nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[62,1,2]]]);
//# sourceMappingURL=main.5a131fd6.chunk.js.map