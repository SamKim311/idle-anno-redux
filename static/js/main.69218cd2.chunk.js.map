{"version":3,"sources":["js/actions/game.js","js/reducers/island.js","js/actions/warehouse.js","js/actions/construction.js","js/reducers/building-definitions.js","js/actions/housing.js","js/actions/trade.js","js/reducers/warehouse.js","js/reducers/construction.js","js/reducers/building.js","js/reducers/couriers.js","js/reducers/housing.js","js/reducers/population.js","js/reducers/amenities.js","js/reducers/population-definitions.js","js/reducers/consume.js","js/reducers/growth.js","js/reducers/finance.js","js/reducers/level-up-definitions.js","js/reducers/level-up.js","js/actions/cheats.js","js/reducers/cheat.js","js/data/trader-info.js","js/reducers/resource-definitions.js","js/reducers/trader.js","js/reducers/root-reducer.js","js/store/initial-state.js","js/scheduler.js","js/components/cheats/TimeFactor.js","js/selectors.js","js/components/ResourcePanel.js","js/components/CourierMonitor.js","js/components/ConstructionPanel.js","js/components/BuildingPanel.js","js/components/PopulationPanel.js","js/components/HousingPanel.js","js/components/SaveLoad.js","js/components/TradePanel.js","js/Game.js","js/serviceWorker.js","index.js","js/store/store.js"],"names":["ACTIONS","INIT","TICK","LOAD_GAME","BUILD_WAREHOUSE","UPDGRADE_WAREHOUSE","CONSTRUCT_BUILDING","DESTROY_BUILDING","BUILDING_CATEGORY","AMENITY","PRODUCER","HOUSE","WAREHOUSE","BuildingDefinitions","marketplace","name","description","category","produces","community","upkeep","chapel","faith","fishinghut","consumes","fish","produceTime","lumberjackhut","wood","orchard","apple","ciderfarm","cider","hempfarm","hemp","weavers","linen","quarry","stone","stonemason","stonebrick","peasanthouse","populationCategory","populationCap","ascendsTo","citizenhouse","cost","tool","smallwarehouse","couriers","capacity","upgradesTo","upgradeCost","gold","mediumwarehouse","smallstockpile","BUILD_HOUSE","ASCEND_HOUSE","BUY_GOODS","SELL_GOODS","resourceDecorations","reserved","pending","deductCost","resources","resourceCopy","Object","assign","entries","ingredient","amount","ingredientCopy","owned","buildingStatus","AWAITING_RESOURCES","WORKING","OUTBOX_FULL","DISABLED","initialProducerState","status","progress","efficiency","efficiencyTimer","efficiencySupplied","inbox","outbox","EFFICIENCY_FACTOR","EFFICIENCY_TIMER","EFFICIENCY_MINIMUM","BASE_EFFICIENCY_MAXIMUM","BASE_IN_OUT_BOX_CAPACITY","initializeInOutBox","building","keys","good","doProductionTick","timeIntervalS","buildingCopy","consumed","canAfford","progressEfficiency","produced","outboxHasRoom","inboxCopy","outboxCopy","Math","min","max","courierState","initCourier","timeThreshold","jobDescription","payload","markedForDeath","state","action","type","gameActions","startingWarehouse","warehouse","courierArrayCopy","slice","addCouriers","courierObjCopy","warehouseActions","nextWarehouse","toUpgrade","toConstruct","id","builtWarehouse","addedCouriers","newState","newCouriers","newArray","constructionActions","toDestroy","courierList","courierIndex","length","courier","markmarkedForDeath","splice","stateCopy","couriersCopy","warehouseMax","totalCapacity","buildings","buildingRefCopy","newJobs","findJobs","jobArrayCopy","jobQueue","concat","jobList","jobRefCopy","jobQueueMap","jobRef","courierListCopy","map","newCourier","nextJobIndex","getNextAvailableJob","nextJob","pickupFromId","from","deliverToId","to","carrying","pickupFrom","deliverTo","inboxRoom","currentSupply","floor","currentOutbox","warehouseRoom","tickIntervalSeconds","fromId","toId","product","hasOwnProperty","resourceToTake","resourceToDeliver","killedCouriers","filter","courierArray","numToAdd","i","uuidv4","push","SUPPLY_SUFFIX","PICKUP_SUFFIX","existingJobs","supplies","values","supplyKey","resource","newJob","pickups","reduce","accumulator","pickupKey","jobArray","jobIndex","initHouseState","popProgress","currentPop","ascensionFactors","rightsLists","patricianhouse","calculateAscensionRights","allTypes","toCheck","totalHouses","sum","pop","totalAscensionRights","ascendTo","alreadyAscended","remainingAscensionRights","initValues","maxPopulation","happiness","canAscend","consumeInfo","amenities","amenity","PopulationDefinitions","peasant","taxRate","quantity","weight","citizen","spice","population","popType","popOriginal","currentHappiness","pctSatisfied","happinessDiff","abs","houses","housing","populationCounts","newAbodes","abodes","abodeOriginal","abode","curHappiness","growthFactor","popCount","newPop","financeInfo","maintenanceCost","taxRevenue","warehouseMaintenance","totalMaintenance","construction","totalTaxes","happinessFactor","unlockThresholds","unlocks","title","island","level","unlockPopType","popRequired","unlocked","constructions","forEach","conId","resId","popUnlocked","types","houseId","unlockedHouse","SET_TIME_FACTOR","cheat","timeFactor","Traders","lord","rates","buy","sell","baseCapacity","ResourceDefinitions","baseTradePrice","BASE_TRADER_STAY_TIME_SECONDS","INIT_STATE","traderId","timer","timeToLeave","wares","newTrader","currentState","traders","selectedTrader","random","traderInfo","maxCapacity","goodBasePrice","buyPrice","sellPrice","held","combinedReducer","combineReducers","warehouseCopy","newResources","resourceId","newResource","housingActions","warehouseToBuild","currentWarehouse","tradeActions","atPrice","goodBought","toConstructId","newOwned","toDestroyId","buildingId","GAME_ACTIONS","updatedBuilding","CONSTRUCTION_ACTIONS","buildingToBuild","newBuilding","newBuildings","buildingToDestroy","toBuild","fromHouseId","fromHouse","toHouseId","fromType","toType","nextHouse","ascendIndex","findIndex","house","populationState","houseBuilt","modifiedPop","currentHouse","oldPop","nextPop","trader","toBuy","rootReducer","saveState","cheatState","intermediateState","amenityState","consumptionState","consume","growthState","growth","financeState","finance","levelUp","INITIAL_STATE","noblehouse","Scheduler","functionToRun","targetInterval","this","targetFunction","running","lastTick","Date","now","setTimeout","repeater","currentTime","elapsedTime","bind","TimeFactor","dispatch","useDispatch","useState","setTf","className","onSubmit","event","setTimeFactor","preventDefault","onChange","e","target","value","required","filterUnlocked","collectionObject","key","setAffordable","buyable","ResourcePanel","warehouseType","useSelector","shallowEqual","warehouseInfo","Buildings","upgradeButton","onClick","item","resourceName","toFixed","CourierMonitor","JSON","stringify","ConstructionPanel","buyableCollection","buyableId","setAllAffordable","constructionList","buildingInfo","ingredientPanel","buyFunction","disabled","Building","props","destroyFunc","BuildingPanel","buildingState","destroyBuildingFn","destroyBuilding","buildingList","PopulationPanel","populationList","popName","HousingPanel","housingList","housedPopulation","availableAscensions","toHouse","toBuilding","ascendHouse","SaveLoad","btoa","navigator","clipboard","writeText","then","alert","loadState","parse","atob","prompt","TradePanel","traderState","goldOnHand","goodsToTrade","tradeData","goodInWarehouse","canBuy","canSell","Resources","goodToBuy","goodToSell","MS_TO_S","Game","timeIntervalMs","scheduler","useEffect","start","Boolean","window","location","hostname","match","ReactDOM","render","store","initialState","localStorage","getItem","createStore","applyMiddleware","thunk","__REDUX_DEVTOOLS_EXTENSION__","configureStore","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.69218cd2.chunk.js","sourcesContent":["export const ACTIONS = {\n  INIT: 'INIT',\n  TICK: 'TICK',\n  LOAD_GAME: 'LOAD_GAME'\n};\n\nexport function init() {\n  return { type: ACTIONS.INIT };\n}\n\nexport function tick(tickIntervalSeconds) {\n  return { type: ACTIONS.TICK, payload: { tickIntervalSeconds: tickIntervalSeconds }};\n}\n\nexport function loadGame(saveState) {\n  return { type: ACTIONS.LOAD_GAME, payload: { saveState: saveState }};\n}\n","export default function(island={}, action) {\n  return island;\n}\n","export const ACTIONS = {\n  BUILD_WAREHOUSE: 'BUILD_WAREHOUSE',\n  UPDGRADE_WAREHOUSE: 'UPGRADE_WAREHOUSE'\n};\n\nexport function buildWarehouse(warehouse) {\n  return { type: ACTIONS.BUILD_WAREHOUSE, payload: { toConstruct: warehouse }};\n}\n\nexport function upgradeWarehouse(currentWarehouse) {\n  return { type: ACTIONS.UPDGRADE_WAREHOUSE, payload: { toUpgrade: currentWarehouse }};\n}\n","export const ACTIONS = {\n  CONSTRUCT_BUILDING: 'CONSTRUCT_BUILDING',\n  DESTROY_BUILDING: 'DESTROY_BUILDING'\n};\n\nexport function constructBuilding(toConstruct) {\n  return { type: ACTIONS.CONSTRUCT_BUILDING, payload: { toConstruct: toConstruct } };\n};\n\nexport function destroyBuilding(toDestroy) {\n  return { type: ACTIONS.DESTROY_BUILDING, payload: { toDestroy: toDestroy }};\n};\n","export const BUILDING_CATEGORY = {\n  AMENITY: 'AMENITY',\n  PRODUCER: 'PRODUCER',\n  HOUSE: 'HOUSE',\n  WAREHOUSE: 'WAREHOUSE'\n}\n\nconst BuildingDefinitions = {\n  // Amenities\n  marketplace: {\n    name: 'Marketplace',\n    description: 'Provides a place for villagers to meet',\n    category: BUILDING_CATEGORY.AMENITY,\n    produces: {\n      community: 2.5\n    },\n    upkeep: 10\n  },\n  chapel: {\n    name: 'Chapel',\n    description: 'A basic building for villagers to worship',\n    category: BUILDING_CATEGORY.AMENITY,\n    produces: {\n      faith: 2\n    },\n    upkeep: 15\n  },\n\n  // Producers\n  fishinghut: {\n    name: 'Fisherman\\'s Hut',\n    description: 'Gathers fish',\n    category: BUILDING_CATEGORY.PRODUCER,\n    consumes: {},\n    produces: {\n      fish: 1\n    },\n    produceTime: 30,\n    upkeep: 15\n  },\n  lumberjackhut: {\n    name: 'Lumberjack\\'s Hut',\n    description: 'Gathers wood',\n    category: BUILDING_CATEGORY.PRODUCER,\n    consumes: {},\n    produces: {\n      wood: 1\n    },\n    produceTime: 40,\n    upkeep: 5\n  },\n  orchard: {\n    name: 'Orchard',\n    description: 'Grows apples to be turned into cider',\n    category: BUILDING_CATEGORY.PRODUCER,\n    consumes: {},\n    produces: {\n      apple: 1\n    },\n    produceTime: 100,\n    upkeep: 0\n  },\n  ciderfarm: {\n    name: 'Cider Farm',\n    description: 'Processes apples into cider',\n    category: BUILDING_CATEGORY.PRODUCER,\n    consumes: {\n      apple: 1\n    },\n    produces: {\n      cider: 1\n    },\n    produceTime: 40,\n    upkeep: 15\n  },\n  hempfarm: {\n    name: 'Hemp Plantation',\n    description: 'Grows hemp',\n    category: BUILDING_CATEGORY.PRODUCER,\n    consumes: {},\n    produces: {\n      hemp: 1\n    },\n    produceTime: 60,\n    upkeep: 20\n  },\n  weavers: {\n    name: 'Weaver\\'s Hut',\n    description: 'Uses hemp to create clothing',\n    category: BUILDING_CATEGORY.PRODUCER,\n    consumes: {\n      hemp: 1\n    },\n    produces: {\n      linen: 1\n    },\n    produceTime: 30,\n    upkeep: 25\n  },\n  quarry: {\n    name: 'Stone Quarry',\n    description: 'Gathers raw stone',\n    category: BUILDING_CATEGORY.PRODUCER,\n    consumes: {},\n    produces: {\n      stone: 1\n    },\n    produceTime: 30,\n    upkeep: 20\n  },\n  stonemason: {\n    name: 'Stonemason',\n    description: 'Turns raw stone into useable bricks',\n    category: BUILDING_CATEGORY.PRODUCER,\n    consumes: {\n      stone: 1\n    },\n    produces: {\n      stonebrick: 1\n    },\n    produceTime: 30,\n    upkeep: 20\n  },\n\n  // Houses\n  peasanthouse: {\n    name: 'Peasant Shack',\n    description: 'Basic home for villagers. Houses 8',\n    category: BUILDING_CATEGORY.HOUSE,\n    upkeep: 0,\n    populationCategory: 'peasant',\n    populationCap: 8,\n    ascendsTo: 'citizenhouse'\n  },\n  citizenhouse: {\n    name: 'Citizen House',\n    description: 'Home for citizens',\n    category: BUILDING_CATEGORY.HOUSE,\n    upkeep: 0,\n    populationCategory: 'citizen',\n    populationCap: 15,\n    ascendsTo: 'patricianhouse',\n    cost: {\n      wood: 1,\n      tool: 1\n    }\n  },\n\n  // Warehouses\n  smallwarehouse: {\n    name: 'Small Warehouse',\n    description: 'Basic warehouse for your island',\n    category: BUILDING_CATEGORY.WAREHOUSE,\n    upkeep: 10,\n    couriers: 3,\n    capacity: 40,\n    upgradesTo: 'mediumwarehouse',\n    upgradeCost: {\n      gold: 150,\n      wood: 2,\n      tool: 3,\n      stonebrick: 4\n    }\n  },\n  mediumwarehouse: {\n    name: 'Medium Warehouse',\n    description: 'Expanded warehouse',\n    category: BUILDING_CATEGORY.WAREHOUSE,\n    upkeep: 15,\n    couriers: 1,\n    capacity: 10\n  },\n  smallstockpile: {\n    name: 'Small Stockpile',\n    description: 'Small depot. Provides 1 courier',\n    category: BUILDING_CATEGORY.WAREHOUSE,\n    upkeep: 10,\n    couriers: 1,\n    capacity: 0\n  }\n};\n\nexport default BuildingDefinitions;\n","import BuildingDefinitions from '../reducers/building-definitions';\n\nexport const ACTIONS = {\n  BUILD_HOUSE: 'BUILD_HOUSE',\n  ASCEND_HOUSE: 'ASCEND_HOUSE'\n};\n\nexport function buildHouse(house) {\n  return { type: ACTIONS.BUILD_HOUSE, payload: { toConstruct: house } };\n}\n\nexport function ascendHouse(fromHouse, toHouse) {\n  const toBuilding = BuildingDefinitions[toHouse];\n  return { type: ACTIONS.ASCEND_HOUSE, payload: { toConstruct: toBuilding, fromHouse: fromHouse }};\n}\n","export const ACTIONS = {\n  BUY_GOODS: 'BUY_GOODS',\n  SELL_GOODS: 'SELL_GOODS'\n};\n\nexport function buyGood(goodToBuy, amount, atPrice) {\n  return { type: ACTIONS.BUY_GOODS, payload: { product: goodToBuy, amount: amount, atPrice: atPrice }};\n};\n\nexport function sellGood(goodToSell, amount, atPrice) {\n  return { type: ACTIONS.SELL_GOODS, payload: { product: goodToSell, amount: amount, atPrice: atPrice }};\n};\n","import { ACTIONS } from '../actions/warehouse';\nimport { ACTIONS as gameActions } from '../actions/game';\nimport { ACTIONS as constructionActions } from '../actions/construction';\nimport { ACTIONS as housingActions } from '../actions/housing';\nimport { ACTIONS as tradeActions } from '../actions/trade';\nimport BuildingDefinitions from './building-definitions';\n\nconst resourceDecorations = {\n  reserved: 0,\n  pending: 0\n}\n\nexport default function(warehouse = {}, action) {\n  const payload = action.payload;\n  switch(action.type) {\n    case gameActions.INIT: {\n      // go through each resource and add the decorator, because I don't wanna copy and paste it a billion times\n      const warehouseCopy = Object.assign({}, warehouse);\n      const newResources = Object.entries(warehouseCopy.resources).reduce((accumulator, [resourceId, resource]) => {\n        const newResource = Object.assign({}, resource, resourceDecorations);\n        accumulator[resourceId] = newResource;\n        return accumulator;\n      }, {});\n      warehouseCopy.resources = newResources;\n      return warehouseCopy;\n    }\n    case housingActions.BUILD_HOUSE:\n    case housingActions.ASCEND_HOUSE:\n    case constructionActions.CONSTRUCT_BUILDING: {\n      const warehouseCopy = Object.assign({}, warehouse);\n      let cost = payload.toConstruct.cost;\n      let newResources = deductCost(warehouseCopy.resources, cost);\n      warehouseCopy.resources = newResources;\n      return warehouseCopy;\n    }\n    case ACTIONS.BUILD_WAREHOUSE: {\n      const warehouseCopy = Object.assign({}, warehouse);\n      let cost = payload.toConstruct.cost;\n      let newResources = deductCost(warehouseCopy.resources, cost);\n      warehouseCopy.resources = newResources;\n\n      const warehouseToBuild = BuildingDefinitions[payload.toConstruct.id];\n\n      warehouseCopy.totalCapacity += warehouseToBuild.capacity;\n\n      return warehouseCopy;\n    }\n    case ACTIONS.UPDGRADE_WAREHOUSE: {\n      const warehouseCopy = Object.assign({}, warehouse);\n      const currentWarehouse = BuildingDefinitions[warehouse.type];\n      const nextWarehouse = BuildingDefinitions[currentWarehouse.upgradesTo];\n      if (!nextWarehouse) {\n        return warehouse;\n      }\n\n      const cost = currentWarehouse.upgradeCost;\n      const newResources = deductCost(warehouseCopy.resources, cost);\n      warehouseCopy.resources = newResources;\n\n      warehouseCopy.totalCapacity += nextWarehouse.capacity;\n      warehouseCopy.type = BuildingDefinitions[warehouse.type].upgradesTo;\n\n      return warehouseCopy;\n    }\n    case tradeActions.BUY_GOODS: {\n      const good = payload.product;\n      const amount = payload.amount;\n      const atPrice = payload.atPrice;\n\n      const gold = {...warehouse.resources.gold};\n      gold.owned -= amount * atPrice;\n\n      const goodBought = {...warehouse.resources[good]};\n      goodBought.owned += amount;\n\n      const resources = {...warehouse.resources, gold: gold, [good]: goodBought};\n      return {...warehouse, resources: resources};\n    }\n    case tradeActions.SELL_GOODS: {\n      const good = payload.product;\n      const amount = payload.amount;\n      const atPrice = payload.atPrice;\n\n      const gold = {...warehouse.resources.gold};\n      gold.owned += amount * atPrice;\n\n      const goodBought = {...warehouse.resources[good]};\n      goodBought.owned -= amount;\n\n      const resources = {...warehouse.resources, gold: gold, [good]: goodBought};\n      return {...warehouse, resources: resources};\n    }\n    default:\n      return warehouse;\n  }\n}\n\nfunction deductCost(resources, cost) {\n  let resourceCopy = Object.assign({}, resources);\n  for (let [ingredient, amount] of Object.entries(cost)) {\n    let ingredientCopy = Object.assign({}, resourceCopy[ingredient]);\n    ingredientCopy.owned -= amount;\n    resourceCopy[ingredient] = ingredientCopy;\n  }\n  return resourceCopy;\n}\n","import { ACTIONS } from '../actions/construction';\nimport { ACTIONS as housingActions } from '../actions/housing';\nimport { ACTIONS as warehouseActions } from '../actions/warehouse';\n\nexport default function(constructions = {}, action) {\n  let payload = action.payload;\n  switch(action.type) {\n    case warehouseActions.BUILD_WAREHOUSE:\n    case housingActions.BUILD_HOUSE:\n    case ACTIONS.CONSTRUCT_BUILDING:\n      let toConstructId = payload.toConstruct.id;\n      let toConstruct = constructions[toConstructId];\n      let newOwned = Object.assign({}, toConstruct, {owned: toConstruct.owned+1});\n      return Object.assign({}, constructions, {[toConstructId]: newOwned});\n    case ACTIONS.DESTROY_BUILDING:\n      const toDestroyId = payload.toDestroy.buildingId;\n      const toDestroy = {...constructions[toDestroyId]};\n      toDestroy.owned--;\n      return {...constructions, [toDestroyId]: toDestroy};\n    default:\n      return constructions;\n  }\n}\n","import uuidv4 from 'uuid/v4';\n\nimport { ACTIONS as CONSTRUCTION_ACTIONS } from '../actions/construction';\nimport { ACTIONS as GAME_ACTIONS } from '../actions/game';\nimport { ACTIONS as warehouseActions } from '../actions/warehouse';\nimport BuildingDefinitions, { BUILDING_CATEGORY } from './building-definitions';\n\nconst buildingStatus = {\n  AWAITING_RESOURCES: 'AWAITING_RESOURCES',\n  WORKING: 'WORKING',\n  OUTBOX_FULL: 'OUTBOX_FULL',\n  DISABLED: 'DISABLED'\n}\n\nconst initialProducerState = {\n  status: buildingStatus.AWAITING_RESOURCES,\n  progress: 0,\n  efficiency: 1,\n  efficiencyTimer: 0,\n  efficiencySupplied: false,\n  inbox: {},\n  outbox: {}\n}\n\nconst EFFICIENCY_FACTOR = 1 / 100.0;\nconst EFFICIENCY_TIMER = 2;\nconst EFFICIENCY_MINIMUM = 1;\nconst BASE_EFFICIENCY_MAXIMUM = 100;\nexport const BASE_IN_OUT_BOX_CAPACITY = 5;\n\nexport default function(buildings = {}, action) {\n  const payload = action.payload;\n  switch(action.type) {\n    case GAME_ACTIONS.TICK: {\n      if (!buildings.owned) {\n        return buildings;\n      }\n      const newState = Object.assign({}, buildings);\n      const newOwned = Object.assign({}, newState.owned);\n      newState.owned = newOwned;\n\n      const timeIntervalS = payload.tickIntervalSeconds;\n      Object.values(buildings.owned).forEach((building) => {\n        let updatedBuilding = null;\n        if (building.category === BUILDING_CATEGORY.PRODUCER) {\n          updatedBuilding = doProductionTick(building, timeIntervalS);\n        } else {\n          updatedBuilding = building;\n        }\n        newOwned[updatedBuilding.id] = updatedBuilding;\n      });\n      return newState;\n    }\n    case warehouseActions.BUILD_WAREHOUSE:\n    case CONSTRUCTION_ACTIONS.CONSTRUCT_BUILDING:\n      const buildingToBuild = BuildingDefinitions[payload.toConstruct.id];\n      let newBuilding = Object.assign({}, buildingToBuild, {id: uuidv4(), buildingId: payload.toConstruct.id});\n      if (buildingToBuild.category === BUILDING_CATEGORY.PRODUCER) {\n        newBuilding = Object.assign(newBuilding, initialProducerState);\n        initializeInOutBox(newBuilding);\n      }\n      const newBuildings = Object.assign({}, buildings.owned);\n      newBuildings[newBuilding.id] = newBuilding;\n      return Object.assign({}, buildings, {owned: newBuildings});\n    case CONSTRUCTION_ACTIONS.DESTROY_BUILDING:\n      const buildingToDestroy = payload.toDestroy;\n      const newOwned = {...buildings.owned};\n      delete newOwned[buildingToDestroy.id];\n      return {...buildings, owned: newOwned};\n    default:\n      return buildings;\n  }\n}\n\nfunction initializeInOutBox(building) {\n  building.inbox = {};\n  for (let ingredient of Object.keys(building.consumes)) {\n    building.inbox[ingredient] = 0;\n  }\n\n  building.outbox = {};\n  for (let good of Object.keys(building.produces)) {\n    building.outbox[good] = 0;\n  }\n}\n\nfunction doProductionTick(building, timeIntervalS) {\n  let buildingCopy = Object.assign({}, building);\n\n  if (!canAfford(buildingCopy)) {\n    buildingCopy.status = buildingStatus.AWAITING_RESOURCES;\n    if (buildingCopy.efficiencySupplied) {\n      buildingCopy.efficiencySupplied = false;\n      buildingCopy.efficiencyTimer = 0;\n    }\n    buildingCopy = progressEfficiency(buildingCopy, timeIntervalS);\n\n    return buildingCopy;\n  }\n\n  if (!outboxHasRoom(buildingCopy)) {\n    buildingCopy.status = buildingStatus.OUTBOX_FULL;\n    if (buildingCopy.efficiencySupplied) {\n      buildingCopy.efficiencySupplied = false;\n      buildingCopy.efficiencyTimer = 0;\n    }\n    buildingCopy = progressEfficiency(buildingCopy, timeIntervalS);\n\n    return buildingCopy;\n  }\n\n  buildingCopy.status = buildingStatus.WORKING;\n  if (!buildingCopy.efficiencySupplied) {\n    buildingCopy.efficiencySupplied = true;\n    buildingCopy.efficiencyTimer = 0;\n  }\n  buildingCopy = progressEfficiency(buildingCopy, timeIntervalS);\n\n  buildingCopy.progress += timeIntervalS * buildingCopy.efficiency * EFFICIENCY_FACTOR;\n  if (buildingCopy.progress > buildingCopy.produceTime) {\n    buildingCopy.progress -= buildingCopy.produceTime;\n    let inboxCopy = Object.assign({}, buildingCopy.inbox);\n    let outboxCopy = Object.assign({}, buildingCopy.outbox);\n\n    for (let [ingredient, consumed] of Object.entries(buildingCopy.consumes)) {\n      inboxCopy[ingredient] -= consumed;\n    }\n\n    for (let [good, produced] of Object.entries(buildingCopy.produces)) {\n      outboxCopy[good] += produced;\n    }\n\n    buildingCopy.inbox = inboxCopy;\n    buildingCopy.outbox = outboxCopy;\n  }\n\n  return buildingCopy;\n}\n\nfunction canAfford(building) {\n  for (let [ingredient, consumed] of Object.entries(building.consumes)) {\n    if (building.inbox[ingredient] < consumed) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction outboxHasRoom(building) {\n  for (let [good, produced] of Object.entries(building.produces)) {\n    let outboxGood = building.outbox[good];\n    if (outboxGood + produced > BASE_IN_OUT_BOX_CAPACITY) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction progressEfficiency(building, timeIntervalS) {\n  building.efficiencyTimer += timeIntervalS;\n  if (building.efficiencyTimer > EFFICIENCY_TIMER) {\n    building.efficiencyTimer -= EFFICIENCY_TIMER;\n    if (building.efficiencySupplied) {\n      // efficiency going up\n      building.efficiency = Math.min(BASE_EFFICIENCY_MAXIMUM, building.efficiency + 1);\n    } else {\n      // efficiency going down\n      building.efficiency = Math.max(EFFICIENCY_MINIMUM, building.efficiency - 1);\n    }\n  }\n  return building;\n}\n","import uuidv4 from 'uuid/v4';\n\nimport { ACTIONS as gameActions } from '../actions/game';\nimport { ACTIONS as warehouseActions } from '../actions/warehouse';\nimport { ACTIONS as constructionActions } from '../actions/construction';\nimport BuildingDefinitions, { BUILDING_CATEGORY } from './building-definitions';\nimport { BASE_IN_OUT_BOX_CAPACITY } from './building';\n\nconst courierState = {\n  IDLE: 'IDLE',\n  PICKING_UP: 'PICKING_UP',\n  EN_ROUTE: 'EN_ROUTE',\n  DROPPING_OFF: 'DROPPING_OFF'\n}\n\nconst BASE_TRAVEL_TIME_SECONDS = 20;\nconst BASE_PICK_UP_DROP_OFF_TIME_SECONDS = 8;\n\nconst initCourier = {\n  status: courierState.IDLE,\n  progress: 0,\n  timeThreshold: 0,\n  jobDescription: {},\n  payload: {},\n  markedForDeath: false\n}\n\nexport default function(state = {}, action) {\n  const payload = action.payload;\n  const couriers = state.couriers;\n  if (!couriers) {\n    return state;\n  }\n  switch(action.type) {\n    case gameActions.INIT:\n      const startingWarehouse = BuildingDefinitions[state.warehouse.type];\n      const courierArrayCopy = couriers.couriers.slice(0);\n      addCouriers(courierArrayCopy, startingWarehouse.couriers);\n      const courierObjCopy = Object.assign({}, couriers);\n      courierObjCopy.couriers = courierArrayCopy;\n      return Object.assign({}, state, {couriers: courierObjCopy});\n    case warehouseActions.UPDGRADE_WAREHOUSE:\n      // \"cheat\" and modify the payload a bit so we can reuse the code for the below case\n      const nextWarehouse = BuildingDefinitions[payload.toUpgrade].upgradesTo;\n      payload.toConstruct = {\n        id: nextWarehouse\n      };\n    case warehouseActions.BUILD_WAREHOUSE: {\n      const builtWarehouse = BuildingDefinitions[payload.toConstruct.id];\n      const addedCouriers = builtWarehouse.couriers;\n      const newState = Object.assign({}, state);\n      const newCouriers = Object.assign({}, newState.couriers);\n      newState.couriers = newCouriers;\n      const newArray = newCouriers.couriers.slice(0);\n      addCouriers(newArray, addedCouriers);\n      newCouriers.couriers = newArray;\n      return newState;\n    }\n    case constructionActions.DESTROY_BUILDING: {\n      const toDestroy = payload.toDestroy;\n      if (toDestroy.category !== BUILDING_CATEGORY.WAREHOUSE) {\n        return state;\n      }\n\n      const courierList = [...state.couriers.couriers];\n      const couriers = {...state.couriers, couriers: courierList};\n      const newState = {...state, couriers: couriers};\n\n      // try to find a courier that's idle\n      for (let courierIndex = 0; courierIndex < courierList.length; courierIndex++) {\n        const courier = courierList[courierIndex];\n        if (courier.status === courierState.IDLE && !courier.markmarkedForDeath) {\n          courierList.splice(courierIndex, 1);\n          return newState;\n        }\n      }\n\n      // if not, mark the last one for death that isn't already marked\n      for (let courierIndex = courierList.length-1; courierIndex >= 0; courierIndex--) {\n        const courier = courierList[courierIndex];\n        if (!courier.markmarkedForDeath) {\n          courier.markedForDeath = true;\n          return newState;\n        }\n      }\n\n      // no idle couriers, and all active ones are already marked for death so...uh...\n      return newState;\n    }\n    case gameActions.TICK: {\n      const stateCopy = Object.assign({}, state);\n      const couriersCopy = Object.assign({}, stateCopy.couriers);\n      const warehouse = Object.assign({}, stateCopy.warehouse);\n      const warehouseMax = warehouse.totalCapacity;\n      const resources = Object.assign({}, warehouse.resources);\n      warehouse.resources = resources;\n      const buildings = Object.assign({}, stateCopy.buildings);\n      const buildingRefCopy = Object.assign({}, buildings.owned);\n      buildings.owned = buildingRefCopy;\n      stateCopy.warehouse = warehouse;\n      stateCopy.buildings = buildings;\n      stateCopy.couriers = couriersCopy;\n\n      // add new jobs\n      const newJobs = findJobs(couriers, warehouse, buildingRefCopy);\n      let jobArrayCopy = couriers.jobQueue.slice(0).concat(newJobs.jobList);\n      const jobRefCopy = Object.assign({}, couriers.jobQueueMap, newJobs.jobRef);\n\n      // if any couriers are available, pick from the top of the queue\n      const courierListCopy = couriersCopy.couriers.map((courier) => {\n        if (courier.status === courierState.IDLE) {\n          const newCourier = Object.assign({}, courier);\n\n          let nextJobIndex = getNextAvailableJob(jobArrayCopy, buildingRefCopy);\n          const nextJob = jobArrayCopy[nextJobIndex];\n          jobArrayCopy = jobArrayCopy.slice(nextJobIndex+1);\n          if (!nextJob) {\n            return courier;\n          }\n\n          const pickupFromId = nextJob.from;\n          const deliverToId = nextJob.to;\n          const good = nextJob.carrying;\n          let pickupFrom = null;\n          let deliverTo = null;\n          let amount = 0;\n\n          if (pickupFromId !== 'warehouse') {\n            pickupFrom = buildings.owned[pickupFromId];\n          } else {\n            pickupFrom = warehouse;\n          }\n\n          if (deliverToId !== 'warehouse') {\n            deliverTo = buildings.owned[deliverToId];\n          } else {\n            deliverTo = warehouse;\n          }\n\n          if (pickupFromId === 'warehouse') {\n            const inboxRoom = BASE_IN_OUT_BOX_CAPACITY - deliverTo.inbox[good];\n            const currentSupply = Math.floor(resources[good].owned - resources[good].reserved);\n            amount = Math.min(inboxRoom, currentSupply);\n            const resourceCopy = Object.assign({}, resources[good]);\n            resourceCopy.reserved += amount;\n            resources[good] = resourceCopy;\n          } else {\n            const currentOutbox = pickupFrom.outbox[good];\n            const warehouseRoom = Math.floor(warehouseMax - resources[good].owned - resources[good].pending);\n            amount = Math.min(currentOutbox, warehouseRoom);\n            const resourceCopy = Object.assign({}, resources[good]);\n            resourceCopy.pending += amount;\n            resources[good] = resourceCopy;\n          }\n\n          nextJob.amount = amount;\n\n          newCourier.status = courierState.PICKING_UP;\n          newCourier.timeThreshold = BASE_PICK_UP_DROP_OFF_TIME_SECONDS;\n          newCourier.jobDescription = nextJob;\n\n          return newCourier;\n        } else {\n          return courier;\n        }\n      });\n\n      couriersCopy.jobQueue = jobArrayCopy;\n      couriersCopy.jobQueueMap = jobRefCopy;\n\n      // work the couriers already on the job (look into merging with the map function up above)\n      const progressedCouriers = courierListCopy.map((courier) => {\n        if (courier.status === courierState.IDLE) {\n          return courier;\n        }\n\n        courier.progress += payload.tickIntervalSeconds;\n        if (courier.progress >= courier.timeThreshold) {\n          courier.progress -= courier.timeThreshold;\n          const jobDescription = courier.jobDescription;\n          const fromId = jobDescription.from;\n          const toId = jobDescription.to;\n          const product = jobDescription.carrying;\n          const amount = jobDescription.amount;\n          let pickupFrom = null;\n          let deliverTo = null;\n\n          if (fromId !== 'warehouse') {\n            if (buildingRefCopy.hasOwnProperty(fromId)) {\n              pickupFrom = Object.assign({}, buildingRefCopy[fromId]);\n              buildingRefCopy[fromId] = pickupFrom;\n            }\n          } else {\n            pickupFrom = warehouse;\n          }\n\n          if (toId !== 'warehouse') {\n            if (buildingRefCopy.hasOwnProperty(toId)) {\n              deliverTo = Object.assign({}, buildingRefCopy[toId]);\n              buildingRefCopy[toId] = deliverTo;\n            }\n          } else {\n            deliverTo = warehouse;\n          }\n\n          switch (courier.status) {\n            case courierState.PICKING_UP: {\n              const payload = Object.assign({}, courier.payload);\n              courier.payload = payload;\n\n              if (fromId === 'warehouse') {\n                const resourceToTake = Object.assign({}, resources[product]);\n                resources[product] = resourceToTake;\n                resourceToTake.owned -= amount;\n                resourceToTake.reserved -= amount;\n                payload[product] = amount;\n              } else {\n                if (!pickupFrom) { // building got deleted...\n                  courier.payload = {};\n                  courier.status = courierState.IDLE;\n                  courier.jobDescription = {};\n                  courier.progress = 0;\n                  courier.timeThreshold = 0;\n\n                  delete jobRefCopy[courier.jobDescription.id];\n                  break;\n                }\n                const outbox = Object.assign({}, pickupFrom.outbox);\n                pickupFrom.outbox = outbox;\n                outbox[product] -= amount;\n                payload[product] = amount;\n                delete jobRefCopy[courier.jobDescription.id];\n              }\n\n              courier.status = courierState.EN_ROUTE;\n              courier.timeThreshold = BASE_TRAVEL_TIME_SECONDS;\n              break;\n            }\n            case courierState.EN_ROUTE:\n              courier.status = courierState.DROPPING_OFF;\n              courier.timeThreshold = BASE_PICK_UP_DROP_OFF_TIME_SECONDS;\n              break;\n            case courierState.DROPPING_OFF: {\n              // drop off goods\n              const payload = Object.assign({}, courier.payload);\n\n              if (toId === 'warehouse') {\n                const resourceToDeliver = Object.assign({}, resources[product]);\n                resources[product] = resourceToDeliver;\n                resourceToDeliver.owned += payload[product];\n                resourceToDeliver.pending -= amount;\n              } else {\n                if (!deliverTo) { // building got deleted...\n                  // return to warehouse\n                  const resourceToDeliver = Object.assign({}, resources[product]);\n                  resources[product] = resourceToDeliver;\n                  resourceToDeliver.owned += payload[product];\n                } else {\n                  const inbox = Object.assign({}, deliverTo.inbox);\n                  deliverTo.inbox = inbox;\n                  inbox[product] += amount;\n                }\n                delete jobRefCopy[courier.jobDescription.id];\n              }\n\n              courier.payload = {};\n              courier.status = courierState.IDLE;\n              courier.jobDescription = {};\n              courier.progress = 0;\n              courier.timeThreshold = 0;\n              break;\n            }\n            default:\n              break;\n          }\n        }\n        return courier;\n      });\n\n      // check for any idle couriers marked for death\n      const killedCouriers = courierListCopy.filter((courier) => courier.status !== courierState.IDLE || !courier.markedForDeath);\n\n      couriersCopy.couriers = killedCouriers;\n\n      stateCopy.couriers = couriersCopy;\n      return stateCopy;\n    }\n    default:\n      return state;\n  }\n}\n\nfunction addCouriers(courierArray, numToAdd) {\n  for (let i=0; i<numToAdd; i++) {\n    const newCourier = Object.assign({}, initCourier, {id: uuidv4()});\n    courierArray.push(newCourier);\n  }\n}\n\nconst SUPPLY_SUFFIX = '_SUPPLY';\nconst PICKUP_SUFFIX = '_PICKUP';\nfunction findJobs(courier, warehouse, buildings) {\n  const existingJobs = courier.jobQueueMap;\n  const warehouseMax = warehouse.totalCapacity;\n  const resources = warehouse.resources;\n\n  // check buildings that need input fed\n  const supplies = {\n    jobList: [],\n    jobRef: {}\n  }\n  for (let building of Object.values(buildings)) {\n    if (building.category !== BUILDING_CATEGORY.PRODUCER) {\n      continue;\n    }\n    for (let [ingredient, amount] of Object.entries(building.inbox)) {\n      const supplyKey = building.id + '_' + ingredient + '_' + SUPPLY_SUFFIX;\n      if (amount < BASE_IN_OUT_BOX_CAPACITY && !existingJobs[supplyKey]) {\n        const resource = resources[ingredient];\n        const supplyRemaining = Math.floor(resource.owned - resource.reserved);\n        if (supplyRemaining > 0) {\n          const newJob = {\n            id: supplyKey,\n            from: 'warehouse',\n            to: building.id,\n            carrying: ingredient\n          };\n          supplies.jobList.push(newJob);\n          supplies.jobRef[supplyKey] = newJob;\n        }\n      }\n    }\n  }\n\n  // check buildings that need outbox picked up\n  const pickups = Object.values(buildings).reduce((accumulator, building) => {\n    if (building.category !== BUILDING_CATEGORY.PRODUCER) {\n      return accumulator;\n    }\n    for (let [product, amount] of Object.entries(building.outbox)) {\n      const pickupKey = building.id + PICKUP_SUFFIX;\n      if (amount > 0 && !existingJobs[pickupKey]) {\n        const resource = resources[product];\n        const spaceRemaining = Math.floor(warehouseMax - resource.owned - resource.pending);\n        if (spaceRemaining > 0) {\n          const newJob = {\n            id: pickupKey,\n            from: building.id,\n            to: 'warehouse',\n            carrying: product\n          };\n          accumulator.jobList.push(newJob);\n          accumulator.jobRef[pickupKey] = newJob;\n        }\n      }\n    }\n    return accumulator;\n  }, {jobList: [], jobRef: {}});\n\n  const jobList = supplies.jobList.concat(pickups.jobList);\n  const jobRefs = Object.assign({}, supplies.jobRef, pickups.jobRef);\n  return {jobList: jobList, jobRef: jobRefs}; // TODO, this will need to be changed to include supply jobs\n}\n\n// The way a job is invalid is if one of the buildings has since been destroyed\nfunction getNextAvailableJob(jobArray, buildings) {\n  for (let jobIndex = 0; jobIndex < jobArray.length; jobIndex++) {\n    const nextJob = jobArray[jobIndex];\n\n    const pickupFromId = nextJob.from;\n    const deliverToId = nextJob.to;\n\n    if (pickupFromId !== 'warehouse' && !buildings.hasOwnProperty(pickupFromId)) {\n      continue;\n    }\n\n    if (deliverToId !== 'warehouse' && !buildings.hasOwnProperty(deliverToId)) {\n      continue;\n    }\n\n    return jobIndex;\n  }\n}\n","import { ACTIONS } from '../actions/housing';\nimport BuildingDefinitions from './building-definitions';\n\nconst initHouseState = {\n  popProgress: 0,\n  currentPop: 1\n};\n\nconst ascensionFactors = {\n  peasanthouse: .8,\n  citizenhouse: .6\n}\n\n// precomputed list of current house and up because I'm lazy\nconst rightsLists = {\n  peasanthouse: ['peasanthouse', 'citizenhouse'],\n  citizenhouse: ['citizenhouse'],\n  patricianhouse: []\n}\n\nexport default function(housing = {}, action) {\n  const payload = action.payload;\n  switch (action.type) {\n    case ACTIONS.BUILD_HOUSE: {\n      const newState = Object.assign({}, housing);\n      const types = Object.assign({}, newState.types);\n      const abodes = newState.abodes.slice(0);\n      newState.types = types;\n      newState.abodes = abodes;\n\n      const toBuild = payload.toConstruct.id; // should really just be peasanthouse\n      const type = Object.assign({}, types[toBuild]);\n      types[toBuild] = type;\n      const abode = Object.assign({}, BuildingDefinitions[toBuild], initHouseState, {houseId: toBuild});\n\n      type.owned += 1;\n      abodes.push(abode);\n\n      calculateAscensionRights(types, type, toBuild);\n\n      return newState;\n    }\n    case ACTIONS.ASCEND_HOUSE: {\n      const fromHouseId = payload.fromHouse;\n      const toHouseId = BuildingDefinitions[fromHouseId].ascendsTo;\n\n      const fromType = {...housing.types[fromHouseId]};\n      const toType = {...housing.types[toHouseId]};\n      const types = {...housing.types, [fromHouseId]: fromType, [toHouseId]: toType};\n      const abodes = [...housing.abodes];\n      const newState = {...housing, types: types, abodes: abodes};\n      const nextHouse = BuildingDefinitions[toHouseId];\n\n      // find the first house that's able to be ascended\n      const ascendIndex = abodes.findIndex((house) => house.houseId === fromHouseId);\n      abodes.splice(ascendIndex, 1);\n      abodes.push({...nextHouse, ...initHouseState, houseId: toHouseId});\n      fromType.owned -= 1;\n      toType.owned += 1;\n\n      calculateAscensionRights(types, fromType, fromHouseId);\n      calculateAscensionRights(types, toType, toHouseId);\n\n      return newState;\n    }\n    default:\n      return housing;\n  }\n};\n\nfunction calculateAscensionRights(allTypes, type, toCheck) {\n  const totalHouses = rightsLists[toCheck].reduce((sum, pop) => sum + allTypes[pop].owned, 0);\n  type.totalAscensionRights = Math.floor(ascensionFactors[toCheck] * totalHouses);\n  const ascendTo = BuildingDefinitions[toCheck].ascendsTo;\n  const alreadyAscended = rightsLists[ascendTo].reduce((sum, pop) => sum + allTypes[pop].owned, 0);\n  type.remainingAscensionRights = type.totalAscensionRights - alreadyAscended;\n}\n","import { ACTIONS as housingActions } from '../actions/housing';\nimport { ACTIONS as gameActions } from '../actions/game';\nimport BuildingDefinitions from './building-definitions';\n\nconst POP_ASCENSION_HAPPINESS_THRESHOLD = 97;\n\nconst initValues = {\n  owned: 0,\n  maxPopulation: 0,\n  happiness: 0,\n  canAscend: false,\n  consumeInfo: ''\n}\n\nexport default function(populationState = {}, action) {\n  const payload = action.payload;\n  switch (action.type) {\n    case gameActions.INIT: {\n      const newState = Object.assign({}, populationState);\n\n      for (let [popType, pop] of Object.entries(newState)) {\n        const newPop = Object.assign({}, pop, initValues);\n        newState[popType] = newPop;\n      }\n\n      return newState;\n    }\n    case housingActions.BUILD_HOUSE: {\n      const houseBuilt = BuildingDefinitions[payload.toConstruct.id];\n      const newState = Object.assign({}, populationState);\n\n      const modifiedPop = Object.assign({}, newState[houseBuilt.populationCategory]);\n      newState[modifiedPop.id] = modifiedPop;\n\n      modifiedPop.maxPopulation += houseBuilt.populationCap;\n\n      return newState;\n    }\n    case gameActions.TICK: {\n      const population = Object.assign({}, populationState);\n\n      for (let [popType, pop] of Object.entries(population)) {\n        if (pop.happiness > POP_ASCENSION_HAPPINESS_THRESHOLD && pop.owned === pop.maxPopulation) {\n          population[popType] = { ...pop, canAscend: true };\n        } else {\n          population[popType] = { ...pop, canAscend: false}\n        }\n      }\n\n      return population;\n    }\n    case housingActions.ASCEND_HOUSE: {\n      const currentHouse = BuildingDefinitions[payload.fromHouse];\n      const nextHouse = BuildingDefinitions[currentHouse.ascendsTo];\n\n      const oldPop = {...populationState[currentHouse.populationCategory]};\n      const nextPop = {...populationState[nextHouse.populationCategory]};\n\n      oldPop.owned -= currentHouse.populationCap;\n      nextPop.owned += currentHouse.populationCap;\n      oldPop.maxPopulation -= currentHouse.populationCap;\n      nextPop.maxPopulation += nextHouse.populationCap;\n\n      return {...populationState, [currentHouse.populationCategory]: oldPop, [nextHouse.populationCategory]: nextPop};\n    }\n    default:\n      return populationState;\n  }\n};\n","// this could probably be done with thunk instead\nimport { ACTIONS } from '../actions/game';\nimport { BUILDING_CATEGORY } from './building-definitions';\n\nconst TIME_FACTOR = 1 / 60.0;\n\nexport default function(state = {}, action) {\n  const payload = action.payload;\n  switch (action.type) {\n    case ACTIONS.TICK:\n      const timeIntervalS = payload.tickIntervalSeconds;\n      const newState = Object.assign({}, state);\n      const buildings = state.buildings;\n\n      const amenities = {};\n      for (let building of Object.values(buildings.owned)) {\n        if (building.category !== BUILDING_CATEGORY.AMENITY) {\n          continue;\n        }\n\n        for (let [amenity, amount] of Object.entries(building.produces)) {\n          if (!amenities[amenity]) {\n            amenities[amenity] = 0;\n          }\n\n          amenities[amenity] += amount * timeIntervalS * TIME_FACTOR;\n        }\n      }\n\n      newState.amenities = amenities;\n      return newState;\n    default:\n      return state;\n  }\n}\n","const PopulationDefinitions = {\n  peasant: {\n    name: 'Peasant',\n    taxRate: 0.8,\n    consumes: {\n      community: {\n        quantity: 1,\n        weight: 25\n      },\n      fish: {\n        quantity: 1,\n        weight: 25\n      },\n      cider: {\n        quantity: 0.44,\n        weight: 25\n      },\n      faith: {\n        quantity: 1,\n        weight: 25\n      }\n    }\n  },\n  citizen: {\n    name: 'Citizen',\n    taxRate: 0.95,\n    consumes: {\n      fish: {\n        quantity: .4,\n        weight: 8\n      },\n      spice: {\n        quantity: .4,\n        weight: 12\n      },\n      cider: {\n        quantity: .44,\n        weight: 20\n      },\n      linen: {\n        quantity: 0.42,\n        weight: 20\n      },\n      community: {\n        quantity: 1,\n        weight: 20\n      },\n      faith: {\n        quantity: 1,\n        weight: 20\n      }\n    }\n  }\n};\n\nexport default PopulationDefinitions;\n","import { ACTIONS } from '../actions/game';\nimport PopulationDefinitions from './population-definitions';\n\nconst TIME_FACTOR = 1 / 60.0;\nconst CONSUME_FACTOR = 1 / 100.0;\nconst MIN_HAPPINESS_DELTA = 0.001;\n\nexport default function(state = {}, action) {\n  const payload = action.payload;\n  switch (action.type) {\n    case ACTIONS.TICK:\n      const timeIntervalS = payload.tickIntervalSeconds;\n      const newState = Object.assign({}, state);\n      const warehouse = Object.assign({}, newState.warehouse);\n      const resources = Object.assign({}, warehouse.resources);\n      warehouse.resources = resources;\n      const amenities = newState.amenities;\n      const population = Object.assign({}, newState.population);\n      newState.warehouse = warehouse;\n      newState.population = population;\n\n      for (const [popType, popOriginal] of Object.entries(state.population)) {\n        const pop = Object.assign({}, popOriginal);\n        pop.consumeInfo = null;\n        let currentHappiness = 0;\n        if (popOriginal.owned !== 0) {\n          for (const [product, consumeInfo] of Object.entries(PopulationDefinitions[popType].consumes)) {\n            const consumed = consumeInfo.quantity * pop.owned * timeIntervalS * TIME_FACTOR * CONSUME_FACTOR;\n            let pctSatisfied = 1;\n\n            if (amenities[product]) {\n              if (amenities[product] < consumed) {\n                pctSatisfied = amenities[product] / consumed;\n                if (!pop.consumeInfo) {\n                  pop.consumeInfo = 'Need ' + product;\n                }\n              }\n              amenities[product] -= consumed;\n              if (amenities[product] < 0) {\n                amenities[product] = 0;\n              }\n            } else if (resources[product]) {\n              const resource = Object.assign({}, resources[product]);\n              resources[product] = resource;\n\n              if (resource.owned < consumed) {\n                pctSatisfied = resource.owned / consumed\n                if (!pop.consumeInfo) {\n                  pop.consumeInfo = 'Need ' + product;\n                }\n              }\n              resource.owned -= consumed;\n              if (resource.owned < 0) {\n                resource.owned = 0;\n              }\n            } else {\n              pctSatisfied = 0;\n              if (!pop.consumeInfo) {\n                pop.consumeInfo = 'Need ' + product;\n              }\n            }\n\n            currentHappiness += consumeInfo.weight * pctSatisfied;\n          }\n        }\n\n        let happinessDiff = (currentHappiness - pop.happiness) / 100.0;\n        if (Math.abs(happinessDiff) < MIN_HAPPINESS_DELTA) {\n          happinessDiff = MIN_HAPPINESS_DELTA;\n        }\n        pop.happiness += happinessDiff;\n        population[popType] = pop;\n      }\n\n      return newState;\n    default:\n      return state;\n  }\n}\n","import { ACTIONS } from '../actions/game';\n\nconst POP_GROWTH_TIME_SECONDS = 10;\nconst POP_GROWTH_THRESHOLD = 40;\nconst POP_DECLINE_THRESHOLD = 20;\n\nexport default function(state = {}, action) {\n  let payload = action.payload;\n  switch(action.type) {\n    case ACTIONS.TICK:\n      const timeIntervalS = payload.tickIntervalSeconds;\n      const newState = Object.assign({}, state);\n      const houses = Object.assign({}, newState.housing);\n      const population = Object.assign({}, newState.population);\n      newState.housing = houses;\n      newState.population = population;\n\n      const populationCounts = {};\n      // go house by house, increment growth timer\n      const newAbodes = houses.abodes.map((abodeOriginal) => {\n        const abode = Object.assign({}, abodeOriginal);\n        const curHappiness = population[abode.populationCategory].happiness;\n        let growthFactor = 0;\n\n        if (curHappiness >= POP_GROWTH_THRESHOLD && abode.currentPop < abode.populationCap) {\n          growthFactor = 1;\n        }\n        if (curHappiness <= POP_DECLINE_THRESHOLD && abode.currentPop > 0) {\n          growthFactor = -1;\n        }\n\n        abode.popProgress += timeIntervalS * growthFactor;\n        if (abode.popProgress > POP_GROWTH_TIME_SECONDS || abode.popProgress < -POP_GROWTH_TIME_SECONDS) {\n          abode.popProgress -= POP_GROWTH_TIME_SECONDS * growthFactor;\n          abode.currentPop += growthFactor;\n        }\n\n        if (abode.currentPop < 1) {\n          abode.currentPop = 1;\n        }\n\n        if (!populationCounts[abode.populationCategory]) {\n          populationCounts[abode.populationCategory] = 0;\n        }\n\n        populationCounts[abode.populationCategory] += abode.currentPop;\n\n        return abode;\n      });\n      houses.abodes = newAbodes;\n\n      for (let [popType, popCount] of Object.entries(populationCounts)) {\n        const newPop = Object.assign({}, population[popType]);\n        newPop.owned = popCount;\n        population[popType] = newPop;\n      }\n\n      return newState;\n    default:\n      return state;\n  }\n}\n","import { ACTIONS } from '../actions/game';\nimport BuildingDefinitions from './building-definitions';\nimport PopulationDefinitions from './population-definitions';\n\nconst TIME_FACTOR = 1/60.0;\nconst TAX_HAPPINESS_FACTOR = 1 / 100.0;\nconst TAX_HAPPINESS_MINIMUM = 0.01;\n\nexport default function(state = {}, action) {\n  const payload = action.payload;\n  switch (action.type) {\n    case ACTIONS.TICK:\n      const timeIntervalS = payload.tickIntervalSeconds;\n      const newState = Object.assign({}, state);\n      const warehouse = Object.assign({}, newState.warehouse);\n      const resources = Object.assign({}, warehouse.resources);\n      const gold = Object.assign({}, resources.gold);\n      newState.warehouse = warehouse;\n      warehouse.resources = resources;\n      resources.gold = gold;\n\n      const financeInfo = {\n        maintenanceCost: 0,\n        taxRevenue: 0\n      }\n\n      // start with Warehouse maintenance\n      const warehouseMaintenance = BuildingDefinitions[warehouse.type].upkeep * timeIntervalS * TIME_FACTOR;\n      const totalMaintenance = Object.values(state.construction).reduce((sum, construction) => {\n        return sum + (BuildingDefinitions[construction.id].upkeep * construction.owned * timeIntervalS * TIME_FACTOR);\n      }, warehouseMaintenance);\n\n      const totalTaxes = Object.values(state.population).reduce((sum, population) => {\n        let happinessFactor = population.happiness * TAX_HAPPINESS_FACTOR;\n        if (happinessFactor < TAX_HAPPINESS_MINIMUM) {\n          happinessFactor = TAX_HAPPINESS_MINIMUM;\n        }\n        return sum + (PopulationDefinitions[population.id].taxRate * population.owned * timeIntervalS * TIME_FACTOR * happinessFactor);\n      }, 0);\n\n      financeInfo.maintenanceCost = totalMaintenance;\n      financeInfo.taxRevenue = totalTaxes;\n      newState.financeInfo = financeInfo;\n\n      gold.owned = gold.owned + totalTaxes - totalMaintenance;\n\n      return newState;\n    default:\n      return state;\n  }\n}\n","export const unlockThresholds = [\n  ['peasant', 60],\n  ['peasant', 90],\n  ['citizen', 1],\n  ['citizen', 355],\n  ['patrician', 510],\n  ['patrician', 1190],\n  ['nobleman', 950],\n  ['nobleman', 2200],\n  ['nobleman', 3500],\n  ['nobleman', 7500]\n];\n\nexport const unlocks = [\n  // initial state\n  {\n    title: 'Small Settlement',\n    buildings: ['marketplace', 'fishinghut', 'lumberjackhut'],\n    population: 'peasant',\n    resources: ['gold', 'wood', 'tool', 'fish']\n  },\n  // 60 peasants\n  {\n    buildings: ['orchard', 'ciderfarm'],\n    resources: ['apple', 'cider']\n  },\n  // 90 peasants\n  {\n    title: 'Settlement',\n    buildings: ['chapel']\n  },\n  // 1 citizen\n  {\n    population: 'citizen',\n    resources: ['hemp', 'linen', 'stone', 'stonebrick', 'spice'],\n    buildings: ['hempfarm', 'weavers', 'quarry', 'stonemason'],\n    housing: ['citizenhouse']\n  }\n];\n","import { ACTIONS } from '../actions/game';\nimport { unlockThresholds, unlocks } from './level-up-definitions'\n\nexport default function(state = {}, action) {\n  switch (action.type) {\n    case ACTIONS.TICK: {\n      const [unlockPopType, popRequired] = unlockThresholds[state.island.level - 1];\n      const currentPop = state.population[unlockPopType].owned;\n      if (currentPop >= popRequired) {\n        const newState = Object.assign({}, state);\n        const island = Object.assign({}, newState.island);\n        newState.island = island;\n        island.level++;\n\n        const unlocked = unlocks[island.level - 1];\n        if (unlocked.title) {\n          island.title = unlocked.title;\n        }\n        if (unlocked.buildings) {\n          const constructions = Object.assign({}, newState.construction);\n          newState.construction = constructions;\n          unlocked.buildings.forEach(conId => {\n            const construction = Object.assign({}, constructions[conId]);\n            construction.unlocked = true;\n            constructions[conId] = construction;\n          });\n        }\n        if (unlocked.resources) {\n          const warehouse = Object.assign({}, newState.warehouse);\n          const resources = Object.assign({}, warehouse.resources);\n          newState.warehouse = warehouse;\n          warehouse.resources = resources;\n          unlocked.resources.forEach(resId => {\n            const resource = Object.assign({}, resources[resId]);\n            resources[resId] = resource;\n            resource.unlocked = true;\n          });\n        }\n        if (unlocked.population) {\n          const population = Object.assign({}, newState.population);\n          newState.population = population;\n          const popUnlocked = Object.assign({}, population[unlocked.population]);\n          popUnlocked.unlocked = true;\n          population[unlocked.population] = popUnlocked;\n        }\n        if (unlocked.housing) {\n          const types = {...newState.housing.types}\n          const housing = {...newState.housing, types: types};\n          newState.housing = housing;\n          unlocked.housing.forEach(houseId => {\n            const unlockedHouse = {...types[houseId], unlocked: true};\n            types[houseId] = unlockedHouse;\n          });\n        }\n\n        return newState;\n      }\n      return state;\n    }\n    default:\n      return state;\n  }\n}\n","export const ACTIONS = {\n  SET_TIME_FACTOR: 'SET_TIME_FACTOR'\n}\n\nexport function setTimeFactor(timeFactor) {\n  return { type: ACTIONS.SET_TIME_FACTOR, payload: { timeFactor: timeFactor }};\n}\n","import { ACTIONS } from '../actions/cheats';\n\nexport default function(state = {}, action) {\n  const payload = action.payload;\n  switch (action.type) {\n    case ACTIONS.SET_TIME_FACTOR:\n      return {\n        ...state,\n        cheat: {\n          timeFactor: payload.timeFactor\n        }\n      }\n    default:\n      return state;\n  }\n}\n","const Traders = {\n  lord: {\n    name: 'Lord Dude',\n    rates: {\n      wood: {\n        buy: .5,\n        sell: 1\n      },\n      tool: {\n        buy: .5,\n        sell: 1\n      }\n    },\n    baseCapacity: 40\n  }\n};\n\nexport default Traders;\n","const ResourceDefinitions = {\n  gold: {\n    name: 'Gold',\n    baseTradePrice: 1\n  },\n  tool: {\n    name: 'Tool',\n    baseTradePrice: 15\n  },\n  fish: {\n    name: 'Fish',\n    baseTradePrice: 3\n  },\n  wood: {\n    name: 'Wood',\n    baseTradePrice: 1\n  },\n  apple: {\n    name: 'Apple',\n    baseTradePrice: 0.2\n  },\n  cider: {\n    name: 'Cider',\n    baseTradePrice: 3\n  },\n  hemp: {\n    name: 'Hemp',\n    baseTradePrice: 4\n  },\n  linen: {\n    name: 'Clothing',\n    baseTradePrice: 27\n  },\n  stone: {\n    name: 'Stone',\n    baseTradePrice: 6\n  },\n  stonebrick: {\n    name: 'Stone Brick',\n    baseTradePrice: 8\n  },\n  spice: {\n    name: 'Spice',\n    baseTradePrice: 6\n  },\n};\n\nexport default ResourceDefinitions;\n","import { ACTIONS as gameActions } from '../actions/game';\nimport { ACTIONS } from '../actions/trade';\nimport Traders from '../data/trader-info';\nimport ResourceDefinitions from './resource-definitions';\n\nconst BASE_TRADER_STAY_TIME_SECONDS = 240;\n\nconst INIT_STATE = {\n  traderId: 0,\n  timer: 0,\n  timeToLeave: 300,\n  wares: {}\n};\n\nexport default function(trader=INIT_STATE, action) {\n  const payload = action.payload;\n  switch (action.type) {\n    case ACTIONS.BUY_GOODS: {\n      const toBuy = payload.product;\n      const amount = payload.amount;\n      const wares = {...trader.wares};\n      const newState = {...trader, wares: wares};\n\n      wares[toBuy].held -= amount;\n\n      return newState;\n    }\n    case ACTIONS.SELL_GOODS: {\n      const toBuy = payload.product;\n      const amount = payload.amount;\n      const wares = {...trader.wares};\n      const newState = {...trader, wares: wares};\n\n      wares[toBuy].held += amount;\n\n      return newState;\n    }\n    case gameActions.TICK:\n      const timeIntervalS = payload.tickIntervalSeconds;\n      const newState = {...trader};\n      newState.timer += timeIntervalS;\n      if (newState.timer > newState.timeToLeave) {\n        newState.timer -= newState.timeToLeave;\n        return newTrader(newState);\n      }\n      return newState;\n    default:\n      return trader;\n  }\n};\n\nfunction newTrader(currentState) { // atm, more like \"restock goods\"\n  const traders = Object.keys(Traders);\n  const selectedTrader = traders[Math.floor(Math.random() * traders.length)];\n  const traderInfo = Traders[selectedTrader];\n  const wares = {};\n  const maxCapacity = traderInfo.baseCapacity;\n  const timeToLeave = BASE_TRADER_STAY_TIME_SECONDS;\n  const newState = {\n    ...currentState,\n    traderId: selectedTrader,\n    wares: wares,\n    maxCapacity: maxCapacity,\n    timeToLeave: timeToLeave\n  };\n\n  for (let [good, rates] of Object.entries(traderInfo.rates)) {\n    const goodBasePrice = ResourceDefinitions[good].baseTradePrice;\n    const buyPrice = rates.buy * goodBasePrice;\n    const sellPrice = rates.sell * goodBasePrice;\n\n    wares[good] = {\n      buyPrice: buyPrice,\n      sellPrice: sellPrice,\n      held: 0\n    }\n    if (sellPrice > 0) {\n      wares[good].held = maxCapacity;\n    }\n  }\n\n  return newState;\n}\n","import { ACTIONS } from '../actions/game';\nimport { combineReducers } from 'redux';\nimport island from './island';\nimport warehouse from './warehouse';\nimport construction from './construction';\nimport buildings from './building';\nimport couriers from './couriers';\nimport housing from './housing';\nimport population from './population';\nimport amenity from './amenities';\nimport consume from './consume';\nimport growth from './growth';\nimport finance from './finance';\nimport levelUp from './level-up';\nimport cheat from './cheat';\nimport trader from './trader';\n\nconst combinedReducer = combineReducers({\n  cheat: (state = {}) => { return state },\n  island: island,\n  warehouse: warehouse,\n  construction: construction,\n  buildings: buildings,\n  couriers: (state = {}) => { return state }, // no op\n  housing: housing,\n  population: population,\n  trader: trader\n});\n\nfunction rootReducer(state, action) {\n  if (action.type === ACTIONS.LOAD_GAME) {\n    return action.payload.saveState;\n  }\n  if (action.type === ACTIONS.TICK) {\n    let timeFactor = state.cheat.timeFactor;\n    if (!timeFactor) {\n      timeFactor = 1;\n    }\n    action.payload.tickIntervalSeconds *= timeFactor;\n  }\n  const cheatState = cheat(state, action);\n  const intermediateState = combinedReducer(cheatState, action);\n  const courierState = couriers(intermediateState, action);\n  if (action.type === ACTIONS.TICK) {\n    const amenityState = amenity(courierState, action);\n    const consumptionState = consume(amenityState, action);\n    const growthState = growth(consumptionState, action);\n    const financeState = finance(growthState, action);\n    const levelUpState = levelUp(financeState, action);\n    return levelUpState;\n  } else {\n    return courierState;\n  }\n}\n\nexport default rootReducer;\n","const INITIAL_STATE = {\n  island: {\n    level: 1,\n    title: 'Small Settlement',\n    name: 'New Island'\n  },\n  construction: {\n    peasanthouse: {\n      id: 'peasanthouse',\n      owned: 0,\n      cost: {\n        wood: 2\n      },\n      unlocked: true\n    },\n    marketplace: {\n      id: 'marketplace',\n      owned: 0,\n      cost: {\n        gold: 400,\n        wood: 5,\n        tool: 3\n      },\n      unlocked: true\n    },\n    fishinghut: {\n      id: 'fishinghut',\n      owned: 0,\n      cost: {\n        gold: 100,\n        wood: 3,\n        tool: 2\n      },\n      unlocked: true\n    },\n    lumberjackhut: {\n      id: 'lumberjackhut',\n      owned: 0,\n      cost: {\n        gold: 50,\n        tool: 2\n      },\n      unlocked: true\n    },\n    smallstockpile: {\n      id: 'smallstockpile',\n      owned: 0,\n      cost: {\n        gold: 200,\n        wood: 2,\n        tool: 3\n      },\n      unlocked: true\n    },\n    orchard: {\n      id: 'orchard',\n      owned: 0,\n      cost: {\n        gold: 25\n      },\n      unlocked: false\n    },\n    ciderfarm: {\n      id: 'ciderfarm',\n      owned: 0,\n      cost: {\n        gold: 100,\n        wood: 5,\n        tool: 1\n      },\n      unlocked: false\n    },\n    chapel: {\n      id: 'chapel',\n      owned: 0,\n      cost: {\n        gold: 1500,\n        wood: 12,\n        tool: 5\n      },\n      unlocked: false\n    },\n    hempfarm: {\n      id: 'hempfarm',\n      owned: 0,\n      cost: {\n        gold: 400,\n        wood: 5,\n        tool: 2\n      },\n      unlocked: false\n    },\n    weavers: {\n      id: 'weavers',\n      owned: 0,\n      cost: {\n        gold: 400,\n        wood: 5,\n        tool: 3\n      }\n    },\n    quarry: {\n      id: 'quarry',\n      owned: 0,\n      cost: {\n        gold: 400,\n        wood: 2,\n        tool: 2\n      }\n    },\n    stonemason: {\n      id: 'stonemason',\n      owned: 0,\n      cost: {\n        gold: 400,\n        wood: 2,\n        tool: 2\n      }\n    }\n  },\n  buildings: {\n    owned: {}\n  },\n  warehouse: {\n    type: 'smallwarehouse',\n    totalCapacity: 40,\n    resources: {\n      gold: {\n        id: 'gold',\n        owned: 5000,\n        unlocked: true\n      },\n      tool: {\n        id: 'tool',\n        owned: 40,\n        unlocked: true\n      },\n      fish: {\n        id: 'fish',\n        owned: 2,\n        unlocked: true\n      },\n      wood: {\n        id: 'wood',\n        owned: 40,\n        unlocked: true\n      },\n      apple: {\n        id: 'apple',\n        owned: 0,\n        unlocked: false\n      },\n      cider: {\n        id: 'cider',\n        owned: 0,\n        unlocked: false\n      },\n      hemp: {\n        id: 'hemp',\n        owned: 0,\n        unlocked: false\n      },\n      spice: {\n        id: 'spice',\n        owned: 0,\n        unlocked: false\n      },\n      linen: {\n        id: 'linen',\n        owned: 0,\n        unlocked: false\n      },\n      stone: {\n        id: 'stone',\n        owned: 0,\n        unlocked: false\n      },\n      stonebrick: {\n        id: 'stonebrick',\n        owned: 0,\n        unlocked: false\n      }\n    },\n  },\n  couriers: {\n    couriers:[],\n    jobQueue: [],\n    jobQueueMap: {}\n  },\n  housing: {\n    types: {\n      peasanthouse: {\n        owned: 0,\n        totalAscensionRights: 0,\n        remainingAscensionRights: 0,\n        unlocked: true,\n      },\n      citizenhouse: {\n        owned: 0,\n        totalAscensionRights: 0,\n        remainingAscensionRights: 0,\n        unlocked: false,\n      },\n      patricianhouse: {\n        owned: 0,\n        totalAscensionRights: 0,\n        remainingAscensionRights: 0,\n        unlocked: false,\n      },\n      noblehouse: {\n        owned: 0,\n        totalAscensionRights: 0,\n        remainingAscensionRights: 0,\n        unlocked: false,\n      }\n    },\n    abodes: []\n  },\n  population: {\n    peasant: {\n      id: 'peasant',\n      unlocked: true\n    },\n    citizen: {\n      id: 'citizen',\n      unlocked: false\n    }\n  }\n};\n\nexport default INITIAL_STATE;\n","export default class Scheduler {\n  constructor(functionToRun, targetInterval) {\n    this.targetFunction = functionToRun;\n    this.targetInterval = targetInterval;\n    this.running = false;\n  }\n\n  start() {\n    if (this.running) {\n      return;\n    }\n    let lastTick = Date.now();\n    this.running = true;\n    let repeater = () => {\n      if (!this.running) {\n          return;\n      }\n      let currentTime = Date.now();\n      let elapsedTime = currentTime - lastTick;\n      this.targetFunction(elapsedTime);\n      lastTick = currentTime;\n      setTimeout(repeater.bind(this), this.targetInterval);\n    }\n    setTimeout(repeater.bind(this), this.targetInterval);\n  }\n\n  stop() {\n    this.running = false;\n  }\n}\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setTimeFactor } from '../../actions/cheats';\n\nconst TimeFactor = () => {\n  const dispatch = useDispatch();\n  const [timeFactor, setTf] = useState(1);\n\n  const handleSubmit = (event) => {\n    dispatch(setTimeFactor(timeFactor));\n    event.preventDefault();\n  }\n\n  return (\n    <div className='time-factor'>\n      <form onSubmit={handleSubmit}>\n        <input type='number' name='timeFactor' onChange={e => setTf(e.target.value)} required></input>\n        <input type='submit' value='Set time factor' />\n      </form>\n    </div>\n  )\n};\n\nexport default TimeFactor;\n","export const filterUnlocked = (collectionObject) => {\n  return Object.entries(collectionObject).reduce((accumulator, [key, value]) => {\n    if (value.unlocked) {\n      accumulator[key] = value;\n    }\n    return accumulator;\n  }, {});\n};\n\nexport const setAffordable = (buyable, resources) => {\n  for (let [resource, amount] of Object.entries(buyable.cost)) {\n    if (!resources[resource]) {\n      // thing costs a resource the player hasn't unlocked\n      return {...buyable, canAfford: false};\n    } else if (resources[resource].owned < amount) {\n      return Object.assign({}, buyable, {canAfford: false});\n    }\n  }\n  return Object.assign({}, buyable, {canAfford: true});\n};\n\nexport const setAllAffordable = (buyableCollection, resources) => {\n  return Object.entries(buyableCollection).reduce((accumulator, [buyableId, buyable]) => {\n    accumulator[buyableId] = setAffordable(buyable, resources);\n    return accumulator;\n  }, {});\n};\n","import React from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { upgradeWarehouse } from '../actions/warehouse';\nimport { filterUnlocked, setAffordable } from '../selectors';\nimport Buildings from '../reducers/building-definitions';\nimport ResourceDefinitions from '../reducers/resource-definitions';\n\nimport '../../style/resource.css';\n\nconst ResourcePanel = () => {\n  const warehouseType = useSelector(state => state.warehouse.type);\n  const resources = useSelector(state => filterUnlocked(state.warehouse.resources), shallowEqual);\n  const max = useSelector(state => state.warehouse.totalCapacity);\n  const warehouseInfo = Buildings[warehouseType];\n  const dispatch = useDispatch();\n\n  const upgradeWarehouseFn = () => {\n    dispatch(upgradeWarehouse(warehouseType));\n  }\n\n  let upgradeButton = null;\n  if (warehouseInfo.upgradesTo && setAffordable({cost: warehouseInfo.upgradeCost}, resources).canAfford) {\n    upgradeButton = (\n      <button onClick={upgradeWarehouseFn}>Upgrade</button>\n    );\n  }\n\n  return (\n    <div className='resource-panel'>\n      <h4>{warehouseInfo.name}</h4>\n      {upgradeButton}\n      <div className='resource-list'>\n        {Object.keys(resources).map((item, key) => {\n            const resourceName = ResourceDefinitions[item].name;\n            if (item !== 'gold') {\n              return <div key={item}>{resourceName}: {resources[item].owned.toFixed(1)} / {max}</div>;\n            } else {\n              return <div key={item}>{resourceName}: {resources[item].owned.toFixed(1)}</div>;\n            }\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default ResourcePanel;\n","import React from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport ResourceDefinitions from '../reducers/resource-definitions';\n\nimport '../../style/courier.css';\n\nconst CourierMonitor = () => {\n  const couriers = useSelector(state => state.couriers, shallowEqual);\n  const buildings = useSelector(state => state.buildings, shallowEqual);\n\n  function jobDescriptionToString(jobDescription) {\n    if (!jobDescription.id) {\n      return 'Sitting idly';\n    }\n    const what = ResourceDefinitions[jobDescription.carrying].name;\n    const howMuch = jobDescription.amount;\n    const fromWhereId = jobDescription.from;\n    let fromWhere = 'nowhere?!';\n    if (fromWhereId === 'warehouse') {\n      fromWhere = 'the warehouse';\n    } else {\n      const building = buildings.owned[fromWhereId];\n      if (!building) {\n        fromWhere = '???';\n      } else {\n        fromWhere = building.name;\n      }\n    }\n    const toWhereId = jobDescription.to;\n    let toWhere = 'nowhere?!';\n    if (toWhereId === 'warehouse') {\n      toWhere = 'the warehouse';\n    } else {\n      const building = buildings.owned[toWhereId];\n      if (!building) {\n        toWhere = '???';\n      } else {\n        toWhere = building.name;\n      }\n    }\n    return `Delivering ${howMuch} ton of ${what} from ${fromWhere} to ${toWhere}`;\n  }\n\n  const courierList = couriers.couriers.map((courier) => {\n    return (\n      <div className='courier' key={courier.id}>\n        <div>{courier.status}</div>\n        <div>{courier.progress.toFixed(1)}</div>\n        {/**<div>{jobDescriptionToString(courier.jobDescription)}</div>**/}\n        <div>{JSON.stringify(courier.payload)}</div>\n      </div>\n    );\n  });\n\n  return (\n    <div className='courier-monitor'>\n      {courierList}\n    </div>\n  );\n};\n\nexport default CourierMonitor;\n","import React from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { filterUnlocked, setAllAffordable } from '../selectors';\nimport BuildingDefinitions, { BUILDING_CATEGORY } from '../reducers/building-definitions';\nimport ResourceDefinitions from '../reducers/resource-definitions';\nimport { constructBuilding } from '../actions/construction';\nimport { buildHouse } from '../actions/housing';\nimport { buildWarehouse } from '../actions/warehouse';\n\nimport '../../style/construction.css';\n\nconst ConstructionPanel = () => {\n  const resources = useSelector(state => state.warehouse.resources);\n  const construction = useSelector(state => setAllAffordable(filterUnlocked(state.construction), resources), shallowEqual);\n  const dispatch = useDispatch();\n\n  const constructionList = Object.entries(construction).map(([buildingId, construction]) => {\n    const buildingInfo = BuildingDefinitions[buildingId];\n    const ingredientPanel = Object.keys(construction.cost).map((ingredient) => (\n      <div className='construction-ingredient' key={ingredient}>{ResourceDefinitions[ingredient].name}: {construction.cost[ingredient]}</div>\n    ));\n\n    let buyFunction = null;\n    if (buildingInfo.category === BUILDING_CATEGORY.HOUSE) {\n      buyFunction = () => dispatch(buildHouse(construction));\n    } else if (buildingInfo.category === BUILDING_CATEGORY.WAREHOUSE) {\n      buyFunction = () => dispatch(buildWarehouse(construction));\n    } else {\n      buyFunction = () => dispatch(constructBuilding(construction));\n    }\n\n    return (\n      <div className='construction' key={buildingId}>\n        <div className='construction-header'><h4>{buildingInfo.name}</h4></div>\n        <div>Owned: {construction.owned}</div>\n        <div className='ingredientList'>{ingredientPanel}</div>\n        <button className='purchase' onClick={buyFunction} disabled={!construction.canAfford}>Buy</button>\n      </div>\n    )\n  });\n  return (\n    <div className='construction-panel'>\n      {constructionList}\n    </div>\n  )\n};\n\nexport default ConstructionPanel;\n","import React from 'react';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport { BUILDING_CATEGORY } from '../reducers/building-definitions';\nimport { destroyBuilding } from '../actions/construction';\n\nimport '../../style/building.css';\n\nconst BuildingPanel = () => {\n  const buildingState = useSelector(state => state.buildings, shallowEqual);\n  const dispatch = useDispatch();\n  const buildings = buildingState.owned;\n\n  const destroyBuildingFn = (toDestroy) => {\n    dispatch(destroyBuilding(toDestroy));\n  }\n\n  let buildingList = Object.values(buildings).map((building) => {\n    if (building.category === BUILDING_CATEGORY.PRODUCER) {\n      return <Building building={building} key={building.id} destroyFunc={destroyBuildingFn}></Building>\n    } else {\n      return (\n        <div className='building' key={building.id}>\n          <div className='building-header'><h4>{building.name}</h4></div>\n          <button onClick={() => destroyBuildingFn(building)}>Destroy</button>\n        </div>\n      )\n    }\n  });\n\n  return (\n    <div className='building-panel'>\n      {buildingList}\n    </div>\n  );\n};\n\nconst Building = (props) => {\n  let building = props.building;\n  return (\n    <div className='building'>\n      <div className='building-header'><h4>{building.name}</h4></div>\n      <div className='status'>{building.status}</div>\n      <div>{building.progress.toFixed(1)} / {building.produceTime}</div>\n      <div>Efficiency: {building.efficiency}</div>\n      <div className='inbox'>Inbox: {JSON.stringify(building.inbox)}</div>\n      <div className='outbox'>Outbox: {JSON.stringify(building.outbox)}</div>\n      <button onClick={() => props.destroyFunc(building)}>Destroy</button>\n    </div>\n  )\n};\n\nexport default BuildingPanel;\n","import React from 'react';\nimport PopulationDefinitions from '../reducers/population-definitions';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport { filterUnlocked } from '../selectors';\n\nimport '../../style/population.css';\n\nconst PopulationPanel = () => {\n  const populationState = useSelector(state => filterUnlocked(state.population), shallowEqual);\n\n  const populationList = Object.values(populationState).map((pop) => {\n      const popName = PopulationDefinitions[pop.id].name;\n      const happiness = pop.happiness ? pop.happiness.toFixed() : 0;\n      return <div className='population' key={pop.id}>\n        {popName}: {pop.owned} / {pop.maxPopulation} Happiness: {happiness} {pop.consumeInfo}\n      </div>\n  });\n\n  return (\n    <div className='population-panel'>\n      {populationList}\n    </div>\n  )\n}\n\nexport default PopulationPanel;\n","import React from 'react';\nimport BuildingDefinitions from '../reducers/building-definitions';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { filterUnlocked } from '../selectors';\n\nimport { ascendHouse } from '../actions/housing';\n\nimport '../../style/housing.css';\n\nconst HousingPanel = () => {\n  const dispatch = useDispatch();\n\n  const houses = useSelector((state) => filterUnlocked(state.housing.types), shallowEqual);\n  const population = useSelector((state) => state.population, shallowEqual);\n  let housingList = Object.keys(houses).map((houseId) => {\n    const housedPopulation = population[BuildingDefinitions[houseId].populationCategory];\n    const canAscend = (houses[houseId].remainingAscensionRights > 0) && housedPopulation.canAscend;\n    const availableAscensions = canAscend ? houses[houseId].remainingAscensionRights : 0;\n    return <div className='housing' key={houseId}>\n      <div className='housing-data'>{BuildingDefinitions[houseId].name}: {houses[houseId].owned}</div>\n      <div><button onClick={() => {dispatch(ascendHouse(houseId, BuildingDefinitions[houseId].ascendsTo))}} disabled={!canAscend}>Ascend</button>{availableAscensions}</div>\n    </div>\n  });\n\n  return (\n    <div className='housing-panel'>\n      {housingList}\n    </div>\n  )\n};\n\nexport default HousingPanel;\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { loadGame } from '../actions/game';\n\nconst SaveLoad = () => {\n  const state = useSelector(state => state);\n  const dispatch = useDispatch();\n\n  const copyState = () => {\n    const saveState = btoa(JSON.stringify(state));\n    navigator.clipboard.writeText(saveState).then(() => {\n      alert('Saved to clipboard');\n    });\n  }\n\n  const loadState = () => {\n    const loadState = JSON.parse(atob(prompt('Enter load data')));\n    if (!loadState) {\n      alert('Invalid save state');\n    } else {\n      dispatch(loadGame(loadState));\n    }\n  }\n\n  return (\n    <div className='save-load'>\n      <button onClick={copyState}>Save</button>\n      <button onClick={loadState}>Load</button>\n    </div>\n  )\n}\n\nexport default SaveLoad;\n","import React from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport Resources from '../reducers/resource-definitions';\nimport Traders from '../data/trader-info';\nimport { buyGood, sellGood } from '../actions/trade';\n\nimport '../../style/trade.css';\n\nconst TradePanel = () => {\n  const traderState = useSelector(state => state.trader, shallowEqual);\n  const warehouse = useSelector(state => state.warehouse, shallowEqual);\n  const dispatch = useDispatch();\n\n  if (traderState.traderId === 0) {\n    return (\n      <div className='trade-panel'>\n      </div>\n    );\n  }\n\n  const resources = warehouse.resources;\n  const goldOnHand = resources.gold.owned;\n\n  const goodsToTrade = Object.entries(traderState.wares).map(([good, tradeData]) => {\n    const goodInWarehouse = resources[good];\n    const canBuy = (goldOnHand >= tradeData.sellPrice) && (tradeData.held > 0) && (goodInWarehouse.owned + goodInWarehouse.pending - goodInWarehouse.reserved < warehouse.totalCapacity);\n    const canSell = (tradeData.held < traderState.maxCapacity) && (goodInWarehouse.owned > 0);\n    return <div className='trade-good' key={good}>\n      {Resources[good].name} available: {tradeData.held}\n      <button onClick={() => dispatch(buyGood(good, 1, tradeData.sellPrice))} disabled={!canBuy}>Buy for {tradeData.sellPrice} Gold</button>\n      <button onClick={() => dispatch(sellGood(good, 1, tradeData.buyPrice))} disabled={!canSell}>Sell for {tradeData.buyPrice} Gold</button>\n    </div>\n  });\n\n  return (\n    <div className='trade-panel'>\n      {goodsToTrade}\n    </div>\n  );\n};\n\nexport default TradePanel;\n","import React, { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { tick as dispatchTick, init as dispatchInit } from './actions/game';\nimport Scheduler from './scheduler';\n\nimport TimeFactor from './components/cheats/TimeFactor';\nimport ResourcePanel from './components/ResourcePanel';\nimport CourierMonitor from './components/CourierMonitor';\nimport ConstructionPanel from './components/ConstructionPanel';\nimport BuildingPanel from './components/BuildingPanel';\nimport PopulationPanel from './components/PopulationPanel';\nimport HousingPanel from './components/HousingPanel';\nimport SaveLoad from './components/SaveLoad';\nimport TradePanel from './components/TradePanel';\n\nconst MS_TO_S = 1/1000.0;\n\nfunction Game() {\n  const [scheduler] = useState(new Scheduler(tick, 100));\n  const dispatch = useDispatch();\n\n  function tick(timeIntervalMs) {\n    dispatch(dispatchTick(timeIntervalMs * MS_TO_S));\n  }\n\n  useEffect(() => {\n    dispatch(dispatchInit());\n    scheduler.start();\n  }, []);\n\n  return (\n    <div className=\"game\">\n      <SaveLoad></SaveLoad>\n      <TimeFactor></TimeFactor>\n      <ResourcePanel></ResourcePanel>\n      <TradePanel></TradePanel>\n      <PopulationPanel></PopulationPanel>\n      <HousingPanel></HousingPanel>\n      <CourierMonitor></CourierMonitor>\n      <ConstructionPanel></ConstructionPanel>\n      <BuildingPanel></BuildingPanel>\n    </div>\n  );\n}\n\nexport default Game;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport configureStore from './js/store/store';\n\nimport './style/index.css';\nimport Game from './js/Game';\nimport * as serviceWorker from './js/serviceWorker';\n\nReactDOM.render(\n<Provider store={configureStore()}>\n  <Game></Game>\n</Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from '../reducers/root-reducer';\nimport INITIAL_STATE from './initial-state';\n\nexport default function configureStore(initialState=INITIAL_STATE) {\n  const saveState = localStorage.getItem('save');\n  if (saveState) {\n    initialState = JSON.parse(atob(prompt('Enter load data')));\n  }\n  if (!initialState) {\n    initialState = INITIAL_STATE;\n  }\n return createStore(\n   rootReducer,\n   initialState,\n   applyMiddleware(thunk) && window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n );\n}\n"],"sourceRoot":""}